<!-- Header Start -->
<div class="card">
  <div class="card-body innerdiv p-0">
    <!-- headerstart here -->
    <div class="hor-header">
      <div style="overflow: hidden">
        <div class="row align-items-left">
          <div class="col-lg-1">
            <button
              class="app-sidebar__toggle ms-auto"
              (click)="sidebarToggle()"
            ></button>
          </div>
          <div class="col-lg-2"></div>
          <div
            class="col-lg-4"
            style="
              font-weight: 600;
              font-size: large;
              text-align: center;
              margin-top: 15px;
            "
          >
            <span style="margin-right: -184px">TMS Dashboard </span>
          </div>
          <div class="col-lg-2 text-center"></div>

          <div class="col-lg-1"></div>
          <div class="col-lg-1">
            <!-- <a  routerLink="/ILgic/createTrip"><i class="fa fa-plus-circle" aria-hidden="true" style="font-size: 20px;color: #1D4380;"></i></a>  -->
          </div>
          <div class="col-lg-1 text-center">
            <a class="header-brand1">
              <img
                src="assets/images/itraceit_logo1.png"
                alt="ILGIC Logo"
                class="header-brand-img desktop-logo"
                style="height: auto; width: 80%"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- HEADER END -->
<div class="container-fluid">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
      <nav class="flex-md-column">
        <div
          class="nav nav-tabs"
          id="nav-tab"
          role="tablist"
          style="background-color: #ece9e9"
        >
          <!-- <button class="nav-link active" id="nav-Region-tab" data-bs-toggle="tab" data-bs-target="#nav-Region"
              type="button" role="tab" aria-controls="nav-Region" aria-selected="true"
             >Load Planner</button> -->

          <button
            class="nav-link active"
            id="nav-ORDER-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-ORDER"
            type="button"
            role="tab"
            aria-controls="nav-ORDER"
            aria-selected="true"
          >
            Order
          </button>
          <!-- REQUEST -->
          <!-- <button class="nav-link" id="nav-REQUEST-tab" data-bs-toggle="tab" data-bs-target="#nav-REQUEST" type="button"
            role="tab" aria-controls="nav-REQUEST" aria-selected="false">
            Quote(Request)
          </button> -->

          <!-- Trip -->
          <!-- <button
              class="nav-link"
              id="nav-Trip-tab"
              data-bs-toggle="tab"
              data-bs-target="#nav-Trip"
              type="button"
              role="tab"
              aria-controls="nav-Trip"
              aria-selected="false"
            >
              Trip
            </button> -->

          <!-- Billing -->
          <button (click)="onTabClicked('billing')" class="nav-link" id="nav-Billing-tab" data-bs-toggle="tab" data-bs-target="#nav-Billing" type="button" role="tab" aria-controls="nav-Billing" aria-selected="false">Billing</button>

          <!-- Agreement -->
          <button
            class="nav-link"
            id="nav-Agreement-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-Agreement"
            type="button"
            role="tab"
            aria-controls="nav-Agreement"
            aria-selected="false"
          >
            Agreement
          </button>

          <!-- Vehicle -->
          <button
          (click)="onTabClicked('vehicle')"
            class="nav-link"
            id="nav-Vehicle-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-Vehicle"
            type="button"
            role="tab"
            aria-controls="nav-Vehicle"
            aria-selected="false"
          >
            Vehicle
          </button>
          <!-- Driver -->
          <button
            (click)="onTabClicked('driver')"
            class="nav-link"
            id="nav-Driver-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-Driver"
            type="button"
            role="tab"
            aria-controls="nav-Driver"
            aria-selected="false"
          >
            Driver
          </button>
        </div>
      </nav>
      <div class="tab-content" id="nav-tabContent">
        <!-- statics -->
        <!-- <div class="tab-pane fade show active" id="nav-Region" role="tabpanel" aria-labelledby="nav-Region-tab">
           Load planner
          </div> -->
        <!-- ORDER -->
        <div class="tab-pane fade show active"
          id="nav-ORDER"
          role="tabpanel"
          aria-labelledby="nav-ORDER-tab"
        >
          <div class="col-lg-12">
            <div class="fiter">
              <p>
                <a
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseExample"
                  role="button"
                  aria-expanded="true"
                  aria-controls="collapseExample"
                  style="font-size: 16px"
                >
                  <i
                    class="fa fa-filter"
                    aria-hidden="true"
                    style="font-size: 20px; color: gray; margin-top: 8px"
                  ></i
                  >FILTER
                </a>
              </p>
              <div class="collapse show" id="collapseExample">
                <div>
                  <div
                    class="card card-body"
                    style="border: none; box-shadow: none; margin-bottom: 0px"
                  >
                    <nav class="flex-md-column">
                      <div
                        class="nav nav-tabs mm"
                        id="nav-tab"
                        role="tablist"
                        style="border-bottom: none !important"
                      >
                        <!-- <button class="nav-link active" id="nav-Region-tab" data-bs-toggle="tab" data-bs-target="#nav-Region"
                          type="button" role="tab" aria-controls="nav-Region" aria-selected="true"
                         >Load Planner</button> -->

                        <button
                          class="nav-link active all-button"
                          id="nav-All-tab"
                          data-bs-toggle="tab"
                          data-bs-target="#nav-All"
                          type="button"
                          role="tab"
                          aria-controls="nav-All"
                          aria-selected="true"
                          (click)="change_status1()"
                        >
                          All
                        </button>
                        <!-- REQUEST -->
                        <button
                          class="nav-link all-button"
                          id="nav-NEw-tab"
                          data-bs-toggle="tab"
                          data-bs-target="#nav-NEw"
                          type="button"
                          role="tab"
                          aria-controls="nav-NEw"
                          aria-selected="false"
                          (click)="change_status()"
                        >
                          New
                        </button>
                      </div>
                    </nav>
                    <div class="tab-content" id="nav-tabContent">
                      <!-- statics -->
                      <!-- <div class="tab-pane fade show active" id="nav-Region" role="tabpanel" aria-labelledby="nav-Region-tab">
                       Load planner
                      </div> -->
                      <!-- ORDER -->
                      <div
                        class="tab-pane fade show active"
                        id="nav-All"
                        role="tabpanel"
                        aria-labelledby="nav-ORDER-tab"
                      >
                        <div
                          class="card card-body"
                          style="
                            border: none;
                            box-shadow: none;
                            margin-bottom: 0px;
                          "
                          *ngIf="All_data"
                        >
                          <!--  -->
                          <form
                            #filterForm="ngForm"
                            (ngSubmit)="filterSubmit(filterForm)"
                          >
                            <div class="col-lg-12">
                              <div class="row">
                                <div class="col-lg-2">
                                  <span class="filtor_name">Start Date</span>
                                  <div class="input-group date" id="datepicker">
                                    <input
                                      type="input"
                                      id="Date-select"
                                      (click)="Dateselect()"
                                      class="form-control"
                                      [ngModel]="datetimepicker1"
                                      required
                                      name="from_Date"
                                    />

                                    <!-- <div class="input-group-append">
                              <span class="input-group-text">
                                <i class="fa fa-calendar" style="color: black !important;"></i>
                              </span>
                            </div> -->
                                  </div>
                                </div>
                                <div class="col-lg-2">
                                  <span class="filtor_name">End Date</span>
                                  <div class="input-group date" id="datepicker">
                                    <input
                                      type="input"
                                      id="Date-select_end"
                                      (click)="Dateselect1()"
                                      class="form-control"
                                      [ngModel]="datetimepicker1"
                                      required
                                      name="To_Date"
                                    />

                                    <!-- <div class="input-group-append">
                              <span class="input-group-text">
                                <i class="fa fa-calendar" style="color: black !important;"></i>
                              </span>
                            </div> -->
                                  </div>
                                </div>
                                <div class="col-lg-2">
                                  <span class="filtor_name">Order Id</span>

                                  <input
                                    type="input"
                                    name="Order_id"
                                    ngModel
                                    placeholder="Enter Order Id"
                                    class="form-control"
                                  />
                                </div>
                                <div class="col-lg-2">
                                  <span class="filtor_name">Client</span>
                                  <ng-select
                                    name="Client"
                                    id="ShipmentNo"
                                    #Clients="ngModel"
                                    [ngClass]="{
                                      'is-invalid':
                                        Clients.invalid &&
                                        (Clients.touched ||
                                          filterForm.submitted)
                                    }"
                                    style="font-size: 14px; font-weight: 400"
                                    ngModel
                                    [closeOnSelect]="true"
                                    required
                                  >
                                    <ng-option value="" selected
                                      >Select</ng-option
                                    >
                                    <!-- <ng-option value="" >Close Body</ng-option>
                            <ng-option value="" >Open Body</ng-option> -->
                                    <ng-option
                                      [value]="item"
                                      *ngFor="let item of client"
                                      >{{ item.value }}
                                    </ng-option>
                                  </ng-select>
                                </div>

                                <!-- <div class="col-lg-2">
                          <span class="filtor_name">From</span>
                          <ng-select name="From"  id="ShipmentNo"
                          style="font-size: 14px;font-weight: 400;" ngModel [closeOnSelect]="true">
                         
                          <ng-option value="" selected>Select</ng-option>
                          <ng-option [value]="item" *ngFor="let item of Source">{{item.value}} </ng-option>
                          
                        </ng-select>
                        </div>
                        <span style="    position: absolute;
                           margin-left: 82%;
                        top: 31px;
                        width: 2px;"><i class="fa-solid fa-arrow-right-arrow-left" style="color: black;"></i></span>
                        <div class="col-lg-2">
                          <span class="filtor_name">To</span>
                          <ng-select name="To"  id="ShipmentNo"
                          style="font-size: 14px;font-weight: 400;" ngModel [closeOnSelect]="true">
                         
                          <ng-option value="" selected>Select</ng-option>
                          <ng-option [value]="item" *ngFor="let item of Destination">{{item.value}} </ng-option>
                          
                        </ng-select>
                        </div> -->
                                <!-- </div>
                         <div class="row"> -->
                                <div class="col-lg-1">
                                  <button
                                    class="btn btn-outline-primary searcg-button"
                                    type="submit"
                                  >
                                    Search
                                  </button>
                                  <!-- <button class="btn"(click)="openLoadPlannerTab()">mmmmm</button> -->
                                </div>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                      <div
                        class="tab-pane fade"
                        id="nav-NEw"
                        role="tabpanel"
                        aria-labelledby="nav-NEw-tab"
                      >
                        <div
                          class="card card-body"
                          style="
                            border: none;
                            box-shadow: none;
                            margin-bottom: 0px;
                          "
                          *ngIf="!All_data"
                        >
                          <!--  -->
                          <form
                            #filterForm="ngForm"
                            (ngSubmit)="filterSubmit(filterForm)"
                          >
                            <div class="col-lg-12">
                              <div class="row">
                                <div class="col-lg-2">
                                  <span class="filtor_name">Start Date</span>
                                  <div class="input-group date" id="datepicker">
                                    <input
                                      type="input"
                                      id="Date-select"
                                      (click)="Dateselect()"
                                      class="form-control"
                                      [ngModel]="datetimepicker1"
                                      required
                                      name="from_Date"
                                    />

                                    <!-- <div class="input-group-append">
                              <span class="input-group-text">
                                <i class="fa fa-calendar" style="color: black !important;"></i>
                              </span>
                            </div> -->
                                  </div>
                                </div>
                                <div class="col-lg-2">
                                  <span class="filtor_name">End Date</span>
                                  <div class="input-group date" id="datepicker">
                                    <input
                                      type="input"
                                      id="Date-select_end"
                                      (click)="Dateselect1()"
                                      class="form-control"
                                      [ngModel]="datetimepicker1"
                                      required
                                      name="To_Date"
                                    />

                                    <!-- <div class="input-group-append">
                              <span class="input-group-text">
                                <i class="fa fa-calendar" style="color: black !important;"></i>
                              </span>
                            </div> -->
                                  </div>
                                </div>
                                <div class="col-lg-2">
                                  <span class="filtor_name">Order Id</span>

                                  <input
                                    type="input"
                                    name="Order_id"
                                    ngModel
                                    placeholder="Enter Order Id"
                                    class="form-control"
                                  />
                                </div>
                                <div class="col-lg-2">
                                  <span class="filtor_name">Client</span>
                                  <ng-select
                                    name="Client"
                                    id="ShipmentNo"
                                    #Clients="ngModel"
                                    [ngClass]="{
                                      'is-invalid':
                                        Clients.invalid &&
                                        (Clients.touched ||
                                          filterForm.submitted)
                                    }"
                                    style="font-size: 14px; font-weight: 400"
                                    ngModel
                                    [closeOnSelect]="true"
                                    required
                                  >
                                    <ng-option value="" selected
                                      >Select</ng-option
                                    >
                                    <!-- <ng-option value="" >Close Body</ng-option>
                            <ng-option value="" >Open Body</ng-option> -->
                                    <ng-option
                                      [value]="item"
                                      *ngFor="let item of client"
                                      >{{ item.transporter_name }}
                                    </ng-option>
                                  </ng-select>
                                </div>

                                <!-- <div class="col-lg-2">
                          <span class="filtor_name">From</span>
                          <ng-select name="From"  id="ShipmentNo"
                          style="font-size: 14px;font-weight: 400;" ngModel [closeOnSelect]="true">
                         
                          <ng-option value="" selected>Select</ng-option>
                          <ng-option [value]="item" *ngFor="let item of Source">{{item.value}} </ng-option>
                          
                        </ng-select>
                        </div>
                        <span style="    position: absolute;
                           margin-left: 82%;
                        top: 31px;
                        width: 2px;"><i class="fa-solid fa-arrow-right-arrow-left" style="color: black;"></i></span>
                        <div class="col-lg-2">
                          <span class="filtor_name">To</span>
                          <ng-select name="To"  id="ShipmentNo"
                          style="font-size: 14px;font-weight: 400;" ngModel [closeOnSelect]="true">
                         
                          <ng-option value="" selected>Select</ng-option>
                          <ng-option [value]="item" *ngFor="let item of Destination">{{item.value}} </ng-option>
                          
                        </ng-select>
                        </div> -->
                                <!-- </div> -->
                                <!-- <div class="row"> -->
                                <div class="col-lg-1">
                                  <button
                                    class="btn btn-outline-primary searcg-button"
                                    type="submit"
                                  >
                                    Search
                                  </button>
                                  <!-- <button class="btn"(click)="openLoadPlannerTab()">mmmmm</button> -->
                                </div>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- </ng-container> -->
                  <!-- <div class=" " ><i class="fa fa-filter" aria-hidden="true"></i></div>    -->
                </div>
              </div>
            </div>
            <div class="col-lg-12" *ngIf="table_show">
              <div class="">
                <!--    data-bs-toggle="modal" data-bs-target="#upload"-->
                <button
                  type="button"
                  class="btn btn-success set-Assign"
                  style="border-radius: 0px; background: #6abd46 !important"
                  (click)="Open_modal1()"
                  [disabled]="!isRadioSelected"
                >
                  Assign vehicle
                </button>
                <button
                  type="button"
                  class="btn btn-danger set-Decline"
                  style="border-radius: 0px; background: red !important"
                  (click)="orderstatus_Decline()"
                  [disabled]="!isRadioSelected"
                >
                  Decline Request
                </button>
              </div>
              <div style="overflow: scroll">
                <table
                  class="table"
                  cellspacing="0"
                  id="Assignvehicle"
                  width="100%"
                >
                  <thead>
                    <tr style="text-align: center; white-space: nowrap">
                      <th class="table-primary"></th>
                      <th class="table-primary">SL</th>
                      <th class="table-primary">Order Number</th>
                      <th class="table-primary">Client</th>
                      <th class="table-primary">Dispatch Date & Time</th>
                      <th class="table-primary">Source</th>
                      <th class="table-primary">Destination</th>
                      <th class="table-primary">Route Sequence</th>
                      <th class="table-primary">Vehicle Capacity</th>
                      <th class="table-primary">Vehicle Type</th>
                      <th class="table-primary">No of Vehicles</th>
                      <th class="table-primary">Vehicle Accessories</th>
                      <th class="table-primary">Requirement</th>

                      <th class="table-primary">Status</th>
                    </tr>
                  </thead>
                  <tbody style="font-family: sans-serif">
                    <tr
                      *ngFor="let item of searched_data; let ind = index"
                      style="white-space: nowrap; text-align: center"
                      [ngStyle]="{ color: getButtonColor(item.Status) }"
                    >
                      <td>
                        <input
                          type="radio"
                          name="value"
                          id="value"
                          (change)="selected_radio(item.OrderNumber, item)"
                          [disabled]="
                            item.Status == '3' ||
                            item.Status == '2' ||
                            item.Status == '0'
                          "
                        />
                      </td>
                      <td>{{ ind + 1 }}</td>
                      <td>{{ item.OrderNumber }}</td>

                      <td>{{ item.customer_name }}</td>
                      <td>{{ item.dispatchdate }} {{ item.dispatchtime }}</td>
                      <td>{{ item.Source }}</td>
                      <td>{{ item.Destination }}</td>
                      <td>{{ item.Route_Sequence }}</td>
                      <td>{{ item.Vehicle_Capacity }}</td>
                      <td>{{ item.Vehicle_Type }}</td>
                      <td>{{ item.No_of_Vehicles }}</td>
                      <td style="color: green">
                        <div class="row">
                          <ng-container
                            *ngIf="item.Vehicle_Accessories[0]?.value"
                          >
                            <div class="col-3">
                              <img
                                class="me-2"
                                src="{{ Safety_list[0].img }}"
                                style="height: 3vh"
                              />
                              <!-- <i class='fas fa-lock-open access' style="color: black;" title="{{item.Vehicle_Accessories[0]?.name}}"></i> -->
                            </div>
                          </ng-container>
                          <ng-container
                            *ngIf="item.Vehicle_Accessories[3]?.value"
                          >
                            <div class="col-3">
                              <!-- <i class='fas fa-fire-extinguisher'></i> -->
                              <img
                                class="me-2"
                                src="{{ Safety_list[3].img }}"
                                style="height: 3vh"
                              />
                              <!-- <i class='fas fa-fire-extinguisher' style="color: red;font-size: 22px;" title="{{item.Vehicle_Accessories[3]?.name}}"></i> -->
                            </div>
                          </ng-container>
                          <ng-container
                            *ngIf="item.Vehicle_Accessories[1]?.value"
                          >
                            <div class="col-3">
                              <img
                                class="me-2"
                                src="{{ Safety_list[1].img }}"
                                style="height: 3vh"
                              />
                              <!-- <i class='fa fa-map-marker access' style="color: green;font-size: 22px;" title="{{item.Vehicle_Accessories[1]?.name}}"></i> -->
                            </div>
                          </ng-container>
                          <ng-container
                            *ngIf="item.Vehicle_Accessories[2]?.value"
                          >
                            <div class="col-3">
                              <!-- <i class="fas fa-user-friends"></i> -->
                              <img
                                class="me-2"
                                src="{{ Safety_list[2].img }}"
                                style="height: 3vh"
                              />
                              <!-- <i class='fas fa-user-friends access' style="color: black;" title="{{item.Vehicle_Accessories[2]?.name}}"></i> -->
                            </div>
                          </ng-container>
                        </div>
                      </td>
                      <td>{{ item.Requirement }}</td>

                      <td>
                        <button
                          type="button"
                          style="
                            font-size: 15px;
                            font-weight: 400;
                            color: green;
                          "
                          [ngStyle]="{ color: getButtonColor(item.Status) }"
                        >
                          {{ item.status_remark }}
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- REQUEST -->
        <!-- <div class="tab-pane fade" id="nav-REQUEST" role="tabpanel" aria-labelledby="nav-REQUEST-tab">
          REQUEST
        </div> -->
        <!-- Trip -->
        <div
          class="tab-pane fade"
          id="nav-Trip"
          role="tabpanel"
          aria-labelledby="nav-Trip-tab"
        >
          Trip
        </div>
        <!-- Billing -->
        <div
          class="tab-pane fade pt-2"
          id="nav-Billing"
          role="tabpanel"
          aria-labelledby="nav-Billing-tab"
        >
          <div class="col-lg-12 d-flex">
            <div class="fiter col-md-10">
              <p style="font-weight: 600;" class="mb-2">
                <a
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseExample"
                  role="button"
                  aria-expanded="false"
                  aria-controls="collapseExample"
                  style="font-size: 16px"
                >
                  <i
                    class="fa fa-filter"
                    aria-hidden="true"
                    style="font-size: 20px; color: #1D4380; ; margin-top: 8px"
                  ></i
                  >FILTER
                </a>
              </p>
              <div class="collapse" id="collapseExample">
                <div>
                  <div
                    class="card card-body pt-0"
                    style="border: none; box-shadow: none; margin-bottom: 0px"
                  >
                    <form [formGroup]="filterForm_Q" (ngSubmit)="onFilter()">
                      <div class="row col-12 ps-0">
                        <div class="col-md-2">
                          <label class="m-0" for="dateFrom">Date: From</label>
                          <input
                            id="dateFrom"
                            type="date"
                            formControlName="dateFrom"
                            class="form-control"
                            placeholder="Select Start Date..."
                            [ngClass]="{
                              'border-danger':
                              filterForm_Q.get('dateFrom')?.touched &&
                              filterForm_Q.get('dateFrom')?.invalid
                            }"
                          />
                          <span
                            style="font-size: 11px"
                            *ngIf="filterForm_Q.get('dateFrom')?.touched && filterForm_Q.get('dateFrom')?.errors?.['required']"
                            class="text-danger position-absolute text-sm-center"
                          >
                            Select start date.
                          </span>
                        </div>
                        <div class="col-md-2">
                          <label class="m-0" for="dateTo">Date: To</label>
                          <input
                            id="dateTo"
                            type="date"
                            formControlName="dateTo"
                            class="form-control"
                            placeholder="Select End Date..."
                            [ngClass]="{
                              'border-danger':
                              filterForm_Q.get('dateTo')?.touched &&
                              filterForm_Q.get('dateTo')?.invalid
                            }"
                          />
                          <span
                            style="font-size: 11px"
                            *ngIf="filterForm_Q.get('dateTo')?.touched && filterForm_Q.get('dateTo')?.errors?.['required']"
                            class="text-danger position-absolute text-sm-center"
                          >
                            Select end date.
                          </span>
                        </div>
                        <div class="col-md-2">
                          <label class="m-0" for="transporter">Customer</label>
                          <ng-select
                            id="transporter"
                            formControlName="transporter"
                            appearance="outline"
                            [searchable]="false"
                            placeholder="Select Customer"
                            class="custom-ng-select"
                            [ngClass]="{
                              'border-danger':
                              filterForm_Q.get('transporter')?.touched &&
                              filterForm_Q.get('transporter')?.invalid
                            }"
                          >
                            <ng-option
                              *ngFor="let customer of customers"
                              [value]="customer.id"
                            >
                              {{ customer.value }}
                            </ng-option>
                          </ng-select>
                          <span
                            style="font-size: 11px"
                            *ngIf="filterForm_Q.get('transporter')?.touched && filterForm_Q.get('transporter')?.errors?.['required']"
                            class="text-danger position-absolute text-sm-center"
                          >
                            Select customer.
                          </span>
                        </div>
                        <div class="col-md-2">
                          <label class="m-0" for="status">Status</label>
                          <ng-select
                            id="status"
                            formControlName="status"
                            appearance="outline"
                            [searchable]="false"
                            placeholder="Select Status"
                            [ngClass]="{
                              'border-danger':
                              filterForm_Q.get('status')?.touched &&
                              filterForm_Q.get('status')?.invalid
                            }"
                          >
                            <ng-option value="1">Pending</ng-option>
                            <ng-option value="2">Approved</ng-option>
                            <ng-option value="3">Rejected</ng-option>
                          </ng-select>
                          <span
                            style="font-size: 11px"
                            *ngIf="filterForm_Q.get('status')?.touched && filterForm_Q.get('status')?.errors?.['required']"
                            class="text-danger position-absolute text-sm-center"
                          >
                            Select status.
                          </span>
                        </div>
                        <div class="col-md-2 text-end d-flex align-items-end">
                          <button
                            [disabled]="filterForm_Q.invalid"
                            [ngClass]="{
                              'disabled-button': filterForm_Q.invalid,
                              'enabled-button': filterForm_Q.valid
                            }"
                            type="submit"
                            class="p-2 px-4 rounded-0 btn-orange shadow-none"
                          >
                            Submit
                          </button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <!-- </ng-container> -->
                <!-- <div class=" " ><i class="fa fa-filter" aria-hidden="true"></i></div>    -->
              </div>
            </div>
            <div class="col mt-1 d-flex justify-content-end align-items-start">
              <button data-bs-target="#transporterModal" data-bs-toggle="modal">
                <i
                  style="color: #1D4380; "
                  class="fa-solid fa-circle-plus fa-2xl"
                ></i>
              </button>
            </div>
          </div>
          <div class="col-lg-12">
            <div class="col-md-10">
              <button
                type="button"
                class="btn-green py-2 px-3 set-Assign shadow-none col-md-1"
                [disabled]="selectedIds.length == 0"
                [ngClass]="{
                  'disabled-button': selectedIds.length == 0,
                  'enabled-button': selectedIds.length != 0
                }"
                (click)="onAccept()"
              >
                Accept</button
              >&nbsp;&nbsp;
              <button
                type="button"
                class="btn-orange py-2 px-3 set-Decline shadow-none col-md-1"
                [disabled]="selectedIds.length == 0"
                [ngClass]="{
                  'disabled-button': selectedIds.length == 0,
                  'enabled-button': selectedIds.length != 0
                }"
                (click)="onReject()"
              >
                Reject
              </button>
            </div>
            <!-- Table -->
            <div class="mt-3">
              <table
                style="width: 100%"
                class="table display nowrap"
                cellspacing="0"
                id="billing-table"
                width="100%"
              >
                <thead>
                  <tr style="text-align: center; white-space: nowrap">
                    <th class="table-primary">
                      <div class="form-check" style="text-align: end">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          value=""
                          (change)="toggleAllSelection()"
                          id="flexCheckChecked"
                          [checked]="allSelected"
                          required
                        />
                      </div>
                    </th>
                    <th class="table-primary">Customer</th>
                    <th class="table-primary">Billing Start Date</th>
                    <th class="table-primary">Billing End Date</th>
                    <th class="table-primary">Vehicle</th>
                    <th class="table-primary">Billing Mode</th>
                    <th class="table-primary">No of Unit</th>
                    <th class="table-primary">Rate</th>
                    <th class="table-primary">Total Amount</th>
                    <th class="table-primary">Raised By</th>
                    <th class="table-primary">Status</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Skeleton Rows -->
                  <ng-container *ngIf="isLoadingBilling">
                    <tr
                      *ngFor="let i of [1, 2, 3, 4, 5]"
                      style="white-space: nowrap; text-align: center"
                    >
                      <td>
                        <div class="skeleton skeleton-checkbox"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text short"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text medium"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text medium"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text long"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text short"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text short"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text medium"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text long"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text short"></div>
                      </td>
                      <td>
                        <div class="skeleton skeleton-text medium"></div>
                      </td>
                    </tr>
                  </ng-container>
                  <ng-container *ngIf="!isLoadingBilling">
                    <tr
                      *ngFor="let item of filterData; let ind = index"
                      style="white-space: nowrap; text-align: center"
                    >
                      <td>
                        <div class="form-check" style="margin-right: 13px">
                          <input
                            *ngIf="item?.Raised_By === 'customer'"
                            class="form-check-input"
                            type="checkbox"
                            [checked]="isSelected(item?._id)"
                            id="checkbox-{{ ind }}"
                            required
                            (change)="toggleSelection(item?._id)"
                          />
                        </div>
                      </td>
                      <td>{{ item?.customer_name }}</td>
                      <td>{{ item?.Billing_Start_Data }}</td>
                      <td>{{ item?.Billing_End_Data }}</td>
                      <td>{{ item?.Vehicle_number || item?.Vehicle_name }}</td>
                      <th>{{ item?.Billing_Mode }}</th>
                      <td>{{ item?.No_of_Unit }}</td>
                      <td>{{ item?.Per_Unit_Charges }}</td>
                      <td>{{ item?.Total_Amount }}</td>
                      <td>{{ item?.Raised_By }}</td>
                      <td>{{ item?.status_remark }}</td>
                      <!-- 
                        <td *ngIf="hide_column">{{item.Vehicle_Contracted}}</td>
                        <td *ngIf="hide_column">{{item.Vehicle_Used}}</td>
                        <td *ngIf="hide_column">{{item.Vehicle_Use_In_Current_Month}}</td>
                        <td *ngIf="hide_column">{{item.Vehicle_Currently_In_Use}}</td>
                        <td *ngIf="hide_column">{{item.Recommendation_IN_Priority}}</td>
                        <td  *ngIf="hide_column">{{item.Vehicle_Remaining}}</td> -->

                      <!-- <td><button type="button" style="    font-size: 15px; font-weight: bold;
                          color: green"[ngStyle]="{'color': getButtonColor(item.Transporter_Score)}" >Request</button> </td> -->
                    </tr>
                  </ng-container>
                </tbody>
              </table>
            </div>
          </div>
          <!-- Button trigger modal -->

          <!-- Modal -->
          <div
            class="modal fade"
            id="transporterModal"
            data-bs-backdrop="static"
            data-bs-keyboard="false"
            tabindex="-1"
            aria-labelledby="transporterModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-xl">
              <div
                class="modal-content rounded-3 border rounded-3 border-1 border-color-light shadow-light"
              >
                <div class="p-3">
                  <h3 style="color: #1d4380" class="text-decoration-underline">
                    Transporter Manual Billing Module
                  </h3>
                  <form
                    [formGroup]="billingForm"
                    (submit)="onSubmit(billingForm.value)"
                  >
                    <div class="d-flex pb-2 pt-2">
                      <div class="col-md-3">
                        <label class="m-0" for="transporter">Customer</label>
                        <ng-select
                          formControlName="transporter"
                          appearance="outline"
                          [searchable]="false"
                          placeholder="Select Transporter"
                        >
                          <ng-option
                            *ngFor="let customer of customers"
                            [value]="customer"
                          >
                            {{ customer.value }}
                          </ng-option>
                        </ng-select>
                      </div>
                      <div
                        class="col-md-3 pb-2 gap-3 d-flex align-items-end justify-content-start"
                      >
                        <button
                          type="button"
                          style="color: #1d4380"
                          [disabled]="billingForm.get('transporter')?.invalid"
                          [ngbTooltip]="
                            !billingForm.get('transporter')?.value
                              ? 'Please select the customer'
                              : ''
                          "
                          (click)="addVehicle()"
                          class="d-flex align-items-center gap-2"
                        >
                          <i
                            style="color: #1d4380"
                            class="fa-solid fa-circle-plus fa-2xl"
                          ></i>
                          <p class="m-0 p-0 fw-bold">Add More Vehicle</p>
                        </button>
                      </div>
                    </div>

                    <div formArrayName="vehicles" class="ms-0 mt-3">
                      <div
                        *ngFor="let vehicle of vehicles.controls; let i = index"
                        [formGroupName]="i"
                        class="d-flex mt-3 py-3"
                      >
                        <div class="col-lg-12">
                          <div class="row">
                            <!-- ///////////////////////////////////////////// -->

                            <div class="custome">
                              <label class="m-0" for="Vehicle_Type"
                                >Vehicle Type</label
                              >
                              <ng-select
                                id="Vehicle_Type"
                                formControlName="Vehicle_Type"
                                appearance="outline"
                                [searchable]="false"
                                placeholder="Enter Vehicle Type"
                                [ngClass]="{'border-danger': vehicle.get('Vehicle_Type')?.touched && vehicle.get('Vehicle_Type')?.errors?.['required']}"
                              >
                                <ng-option
                                  *ngFor="let vehicles of vehicleList"
                                  [value]="vehicles"
                                  >{{ vehicles.vehicle_no }}</ng-option
                                >
                              </ng-select>
                              <span
                                style="font-size: 11px"
                                *ngIf=" vehicle.get('Vehicle_Type')?.touched && vehicle.get('Vehicle_Type')?.errors?.['required']"
                                class="text-red position-absolute text-sm-center"
                              >
                                Select vehicle</span
                              >
                            </div>
                            <div class="custome">
                              <label class="m-0" for="Billing_Start_Data"
                                >Billing Start Date</label
                              >
                              <input
                                id="Billing_Start_Data"
                                type="date"
                                formControlName="Billing_Start_Data"
                                class="form-control"
                                placeholder="Select Start Date..."
                                [ngClass]="{'border-danger': vehicle.get('Billing_Start_Data')?.touched && vehicle.get('Billing_Start_Data')?.errors?.['required']}"
                              />
                              <span
                                style="font-size: 11px"
                                *ngIf=" vehicle.get('Billing_Start_Data')?.touched && vehicle.get('Billing_Start_Data')?.errors?.['required']"
                                class="text-red position-absolute text-sm-center"
                              >
                                Select start date</span
                              >

                              <span
                                style="font-size: 11px"
                                *ngIf="vehicle.hasError('dateRange')"
                                class="text-danger position-absolute text-sm-center"
                              >
                                Start date must be before end date.
                              </span>
                            </div>

                            <div class="custome">
                              <label class="m-0" for="Billing_End_Data"
                                >Billing End Date</label
                              >
                              <input
                                id="Billing_End_Data"
                                type="date"
                                formControlName="Billing_End_Data"
                                class="form-control"
                                placeholder="Select End Date..."
                                [ngClass]="{'border-danger': vehicle.get('Billing_End_Data')?.touched && vehicle.get('Billing_End_Data')?.errors?.['required']}"
                              />
                              <span
                                style="font-size: 11px"
                                *ngIf=" vehicle.get('Billing_End_Data')?.touched && vehicle.get('Billing_End_Data')?.errors?.['required']"
                                class="text-red position-absolute text-sm-center"
                              >
                                Select end date</span
                              >
                            </div>
                            <div class="custome">
                              <label class="m-0" for="Billing_Mode"
                                >Billing Mode</label
                              >
                              <ng-select
                                id="Billing_Mode"
                                formControlName="Billing_Mode"
                                appearance="outline"
                                [searchable]="false"
                                (change)="onBillingModeChange(i)"
                                placeholder="Select Billing Mode"
                                [ngClass]="{'border-danger': vehicle.get('Billing_Mode')?.touched && vehicle.get('Billing_Mode')?.errors?.['required']}"
                              >
                                <ng-option value="trip">Trip Based</ng-option>
                                <ng-option value="km">KM Based</ng-option>
                                <ng-option value="day">Day Based</ng-option>
                              </ng-select>
                              <span
                                style="font-size: 11px"
                                *ngIf=" vehicle.get('Billing_Mode')?.touched && vehicle.get('Billing_Mode')?.errors?.['required']"
                                class="text-red position-absolute text-sm-center"
                              >
                                Select billing mode</span
                              >
                            </div>
                            <div class="custome">
                              <label class="m-0">{{
                                vehicle.get("numberOfUnitsLabel")?.value ||
                                  "Number of Units"
                              }}</label>
                              <input
                                min="0"
                                type="number"
                                formControlName="No_of_Unit"
                                class="form-control"
                                placeholder="Enter Number of Units"
                                [ngClass]="{'border-danger': vehicle.get('No_of_Unit')?.touched && (vehicle.get('No_of_Unit')?.errors?.['required']||vehicle.get('No_of_Unit')?.errors?.['min'])}"
                              />
                              <span
                                style="font-size: 11px"
                                *ngIf="vehicle.get('No_of_Unit')?.touched && vehicle.get('No_of_Unit')?.errors?.['required']"
                                class="text-danger position-absolute text-sm-center"
                              >
                                Enter the number of units.
                              </span>
                              <span
                                style="font-size: 11px"
                                *ngIf="vehicle.get('No_of_Unit')?.touched && vehicle.get('No_of_Unit')?.errors?.['min']"
                                class="text-danger position-absolute text-sm-center"
                              >
                                Unit should not be negative.
                              </span>
                            </div>
                            <div class="custome">
                              <label class="m-0">{{
                                vehicle.get("perUnitChargesLabel")?.value ||
                                  "Per Unit Charges"
                              }}</label>
                              <input
                                min="0"
                                type="number"
                                formControlName="Per_Unit_Charges"
                                class="form-control"
                                placeholder="Enter Per Unit Charges"
                                [ngClass]="{'border-danger': vehicle.get('Per_Unit_Charges')?.touched && (vehicle.get('Per_Unit_Charges')?.errors?.['required']||vehicle.get('Per_Unit_Charges')?.errors?.['min'])}"
                              />
                              <span
                                style="font-size: 11px"
                                *ngIf="vehicle.get('Per_Unit_Charges')?.touched && vehicle.get('Per_Unit_Charges')?.errors?.['required']"
                                class="text-danger position-absolute text-sm-center"
                              >
                                Enter the per unit charges.
                              </span>
                              <span
                                style="font-size: 11px"
                                *ngIf="vehicle.get('Per_Unit_Charges')?.touched && vehicle.get('Per_Unit_Charges')?.errors?.['min']"
                                class="text-danger position-absolute text-sm-center"
                              >
                                Charges should not be negative.
                              </span>
                            </div>
                            <div
                              class="d-flex custome flex-grow-0 position-relative"
                            >
                              <div
                                class="d-flex flex-column align-items-center justify-content-between"
                              >
                                <label class="m-0 text-nowrap"
                                  >Total Charges</label
                                >
                                <h5
                                  class="charges m-0 mb-2 text-decoration-underline position-absolute bottom-0"
                                >
                                  {{
                                    vehicle.get("Total_Amount")?.value
                                      | currency : "₹"
                                  }}
                                </h5>
                              </div>
                              <div
                                class="d-flex align-items-end justify-content-center"
                              >
                                <button
                                  type="button"
                                  (click)="removeVehicle(i)"
                                  class="col-md-8 mb-0.5 py-1 btn-remove-vehicle rounded-1 text-white"
                                >
                                  <i
                                    class="fa fa-trash h3 m-0 text-black"
                                    aria-hidden="true"
                                  ></i>
                                </button>
                              </div>
                            </div>

                            <!-- ///////////////////////////////////// -->
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      class="d-flex justify-content-center gap-4 col-md-7 mx-auto"
                    >
                      <button
                        [disabled]="
                          !billingForm.valid ||
                          !billingForm.value.vehicles.length ||
                          !saveBillButton
                        "
                        [ngClass]="{
                          'disabled-button':
                            !billingForm.valid ||
                            !billingForm.value.vehicles.length ||
                            !saveBillButton,
                          'enabled-button':
                            billingForm.valid &&
                            billingForm.value.vehicles.length &&
                            saveBillButton
                        }"
                        style="
                          border: 1.6px solid #172c51;
                          background-color: #1d4380;
                        "
                        type="submit"
                        class="text-white h5 py-2 px-3 rounded-3 mt-3 col-md-2"
                      >
                        Save
                      </button>

                      <button
                        style="border: 1.6px solid #172c51"
                        type="button"
                        data-bs-dismiss="modal"
                        class="text-white h5 py-2 px-3 rounded-3 btn-orange mt-3 shadow-none col-md-2"
                      >
                        Cancel
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Agreement -->
        <div
          class="tab-pane fade"
          id="nav-Agreement"
          role="tabpanel"
          aria-labelledby="nav-Agreement-tab"
        >
          <!-- /////////////////////////////////////agreement///////////////////////////////////////////////////////// -->
          <div class="container">
            <div class="row">
              <div class="col">
                <form
                  [formGroup]="AgreementForm"
                  (ngSubmit)="submitForm(AgreementForm.value)"
                >
                  <div class="row">
                    <div class="col-lg-12">
                      <div class="row mt-2">
                        <div class="column">
                          <label for="" class="cutom">Customer name</label>
                          <ng-select
                            placeholder="select an option"
                            id="ShipmentNo"
                            [class.invalid-select]="
                              AgreementForm.controls.VenderName?.invalid &&
                              AgreementForm.controls.VenderName?.touched
                            "
                            class="cutombox"
                            formControlName="VenderName"
                            required
                          >
                            <ng-option value="" selected
                              >Select an option</ng-option
                            >
                            <ng-option
                              [value]="item"
                              *ngFor="let item of customers"
                              >{{ item.value }}</ng-option
                            >
                          </ng-select>
                          <div
                            *ngIf="
                              AgreementForm.controls.VenderName?.invalid &&
                              AgreementForm.controls.VenderName?.touched
                            "
                            class="error-message"
                          >
                            Please fill out this field
                          </div>
                          <!-- <input type="text" id="form12" class="form-control cutombox" formControlName="VenderName" required /> -->
                        </div>
                        <div class="column">
                          <label for="" class="cutom">Agreement Code</label>
                          <input
                            type="text"
                            id="form12"
                            class="form-control cutombox"
                            formControlName="AgreementCode"
                            required
                          />
                        </div>
                        <div class="column">
                          <label for="" class="cutom">Agreement Date</label>
                          <input
                            type="datetime-local"
                            step="1"
                            class="form-control cutombox"
                            formControlName="AgreementDate"
                            required
                          />
                        </div>
                        <div class="column">
                          <label for="" class="cutom">No. Of Vehicle</label>
                          <input
                            type="text"
                            id="form12"
                            formControlName="TotalnoVehicle"
                            class="form-control cutombox"
                            required
                          />
                        </div>

                        <div class="column">
                          <label for="" class="cutom">Upload Agreement</label>
                          <input
                            type="file"
                            id="form12"
                            (change)="selectFile($event)"
                            formControlName="AgreementFile"
                            class="form-control cutombox"
                            required
                          />
                        </div>
                        <!-- <div class="column">
                                      <button  type="button"  class="btn btn-outline-primary btn-sm mt-6">Submit</button>
                                  </div> -->
                        <div class="column" align="right">
                          <label for="" class="cutom"></label>
                          <button
                            type="button"
                            class="btn btn-outline-primary btn mt-4"
                            (click)="addtable()"
                          >
                            <i class="fa fa-plus"></i>Add
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-12" align="right" style="padding: 10px">
                    <!-- <span>
                              <button type="button" class="btn btn-success" (click)="addtable()">
                                  <i class="fa fa-plus" style="color: white;"></i>Add
                              </button>
                          </span> -->
                  </div>
                  <div style="height: 420px; overflow-x: auto">
                    <div formArrayName="Agreement" id="accordionExample">
                      <div
                        class=""
                        *ngFor="
                          let table1st of getcustumerinvoice().controls;
                          let i = index
                        "
                      >
                        <div [formGroupName]="i">
                          <div class="accordion-item mt-2">
                            <div class="d-flex align-items-center">
                              <h2
                                class="accordion-header flex-grow-1"
                                [id]="'heading' + i"
                                style="
                                  border-radius: 2px;
                                  margin: 0;
                                  background-color: #f4f5fb;
                                  color: black;
                                "
                              >
                                <button
                                  class="accordion-button"
                                  type="button"
                                  data-bs-toggle="collapse"
                                  [attr.data-bs-target]="'#collapse' + i"
                                  aria-expanded="false"
                                  [attr.aria-controls]="'collapse' + i"
                                  style="
                                    height: 32px;
                                    background: none;
                                    width: 100%;
                                    color: black;
                                    font-weight: 600;
                                    font-family: sans-serif;
                                  "
                                >
                                  Agreement Information
                                  <!-- <button type="button" (click)="deletetable(i)"
                                                              style="height: 33.5px;margin-left: 1007px;">
                                                              <i class="fa fa-times-circle" style="font-size: 18px;color: white;"></i>
                                                          </button> -->

                                  <a
                                    type="button"
                                    (click)="deletetable(i)"
                                    style="
                                      position: absolute;

                                      right: 55px;
                                      margin-top: 5px;
                                    "
                                  >
                                    <i
                                      class="fa fa-times-circle"
                                      style="font-size: 18px; color: black"
                                    ></i>
                                  </a>
                                </button>
                              </h2>
                            </div>
                            <div
                              [id]="'collapse' + i"
                              class="accordion-collapse collapse"
                              [attr.aria-labelledby]="'heading' + i"
                              data-bs-parent="#accordionExample"
                            >
                              <div class="accordion-body">
                                <div class="col-lg-12">
                                  <div class="row">
                                    <div class="col-lg-6">
                                      <div class="row mt-2">
                                        <div class="col-lg-4 cutom">
                                          Number Of Vehicle
                                        </div>
                                        <div class="col-lg-5">
                                          <input
                                            type="number"
                                            class="form-control cutombox"
                                            formControlName="Noofvehcle"
                                            style="height: 32px"
                                          />
                                        </div>
                                      </div>
                                      <div class="row mt-2">
                                        <div class="col-lg-4 cutom">
                                          Vehicle Type
                                        </div>
                                        <div class="col-lg-5">
                                          <ng-select
                                            placeholder="select an option"
                                            id="ShipmentNo"
                                            class="cutombox"
                                            required
                                            name="source"
                                            formControlName="vehcleType"
                                          >
                                            <ng-option value="" selected
                                              >Select an option</ng-option
                                            >
                                            <ng-option
                                              [value]="item"
                                              *ngFor="
                                                let item of filterDataagreement.bodytype
                                              "
                                              >{{ item.value }}</ng-option
                                            >
                                            <!-- <ng-option [value]="item.source_id"
                                                                    *ngFor="let item of sourceListdata">{{item.source_name}}</ng-option> -->
                                          </ng-select>
                                        </div>
                                      </div>
                                      <div class="row mt-2">
                                        <div class="col-lg-4 cutom">
                                          Vehicle Capacity
                                        </div>
                                        <div class="col-lg-5">
                                          <ng-select
                                            placeholder="select an option"
                                            id="ShipmentNo"
                                            class="cutombox"
                                            required
                                            name="source"
                                            formControlName="vehcleCapacity"
                                          >
                                            <ng-option value="" selected
                                              >Select an option</ng-option
                                            >
                                            <ng-option
                                              [value]="item"
                                              *ngFor="
                                                let item of filterDataagreement.vehiclecapacity
                                              "
                                              >{{ item.capacity }}</ng-option
                                            >
                                            <!-- <ng-option [value]="item.source_id"
                                                                    *ngFor="let item of sourceListdata">{{item.source_name}}</ng-option> -->
                                          </ng-select>
                                        </div>
                                      </div>
                                      <div class="row mt-2">
                                        <div class="col-lg-4 cutom">
                                          Trip Type
                                        </div>
                                        <div class="col-lg-5">
                                          <ng-select
                                            placeholder="select an option"
                                            id="ShipmentNo"
                                            (change)="TripTypeF($event)"
                                            class="cutombox"
                                            required
                                            name="source"
                                            formControlName="tripType"
                                          >
                                            <!-- <ng-option value="T" selected>Trip Based</ng-option>
                                            <ng-option value="D" selected>Distance Based</ng-option>
                                            <ng-option value="H" selected>Hourly Based</ng-option>
                                            <ng-option value="DH" selected>Distance & Hourly Based</ng-option> -->

                                            <ng-option
                                              [value]="item"
                                              *ngFor="
                                                let item of filterDataagreement.agreementtype
                                              "
                                              >{{ item.value }}</ng-option
                                            >
                                          </ng-select>
                                        </div>
                                      </div>
                                      <div class="row mt-2">
                                        <div class="col-lg-4 cutom">
                                          Toll Tax
                                        </div>
                                        <div class="col-lg-5">
                                          <input
                                            type="number"
                                            class="form-control cutombox"
                                            formControlName="tolltax"
                                            style="height: 32px"
                                          />
                                        </div>
                                      </div>

                                      <div class="row mt-2">
                                        <div class="col-lg-4 cutom">
                                          From Date
                                        </div>
                                        <div class="col-lg-5">
                                          <input
                                            type="datetime-local"
                                            step="1"
                                            class="form-control cutombox"
                                            name="runDate"
                                            required
                                            formControlName="fromdate"
                                          />
                                        </div>
                                      </div>
                                      <div class="row mt-2">
                                        <div class="col-lg-4 cutom">
                                          To Date
                                        </div>
                                        <div class="col-lg-5">
                                          <input
                                            type="datetime-local"
                                            step="1"
                                            class="form-control cutombox"
                                            name="runDate"
                                            required
                                            formControlName="todate"
                                          />
                                        </div>
                                      </div>
                                      <div class="row mt-2">
                                        <div class="col-lg-4 cutom">
                                          <label for="" class="column cutom">
                                            Night Charge</label
                                          >
                                          <input
                                            class="form-check-input"
                                            type="checkbox"
                                            value=""
                                            (change)="Nightf($event)"
                                            id="flexCheckChecked"
                                            style="
                                              margin-left: 2px;
                                              border: 1px solid;
                                            "
                                            checked
                                            required
                                          />
                                        </div>
                                        <div class="col-lg-5">
                                          <div class="row">
                                            <ng-container *ngIf="TimeCheck">
                                              <div class="col-lg-6">
                                                <label for="" class="cutom"
                                                  >From</label
                                                >
                                                <input
                                                  type="time"
                                                  class="form-control cutombox"
                                                  required
                                                  formControlName="NighFrom"
                                                />
                                              </div>
                                              <div class="col-lg-6">
                                                <label for="" class="cutom"
                                                  >To</label
                                                >
                                                <input
                                                  type="time"
                                                  class="form-control cutombox"
                                                  required
                                                  formControlName="NightTo"
                                                />
                                              </div>
                                            </ng-container>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <!-- //////////////////////////////////////////////////// -->

                                    <div class="col-lg-6">
                                      <ng-container *ngIf="tripF == 'T'">
                                        <div class="row">
                                          <label for="" class="HeadingTab">{{
                                            Based
                                          }}</label>
                                        </div>
                                        <!-- <legend>{{Based}}:</legend> -->
                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Minimum no of Trips
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="Tminoftrips"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Trip Cost</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="ttripcost"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Tentative Distance (Km)
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="TTentativeDistance"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>
                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Fixed Charges</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="TFixedCharges"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Minimum Monthly Cost
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="tMinimumMonthlyCost"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngIf="tripF == 'D'">
                                        <div class="row">
                                          <label for="" class="HeadingTab">{{
                                            Based
                                          }}</label>
                                        </div>
                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Minimum Distance (Km)
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="DMinimumDistance"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom">
                                              Distance Cost</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="DDistanceCost"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Tentative Distance (Km)
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dTentativeDistance"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>

                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Fixed Charges</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dFixedCharges"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Minimum Monthly Cost
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dMinimumMonthlyCost"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngIf="tripF == 'H'">
                                        <div class="row">
                                          <label for="" class="HeadingTab">{{
                                            Based
                                          }}</label>
                                        </div>
                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Minimum Duration (Hrs.)
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="hMinimumDuration"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom">
                                              Hourly Cost</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="hHourlyCost"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Tentative Distance (Km)
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="hTentativeDistance"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>
                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Fixed Charges</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="hFixedCharges"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Minimum Monthly Cost</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="hMinimumMonthlyCost"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngIf="tripF == 'DH'">
                                        <div class="row">
                                          <label for="" class="HeadingTab">{{
                                            Based
                                          }}</label>
                                        </div>
                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Minimum Daily Distance(Km)</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dhMinimumDailyDistance"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom">
                                              Minimum Daily Duration(Hrs)</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dhMinimumDailyDuration"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Distance Cost</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dhDistanceCost"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>
                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Hourly Cost</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dhHourlyCost"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Tentative Distance (Km)
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dhTentativeDistance"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Tentative Durations (Hrs.)
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dhTentativeDurations"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>

                                        <div class="row mt-2">
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Fixed Charges
                                            </label>
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dhFixedCharges"
                                              style="height: 32px"
                                            />
                                          </div>
                                          <div class="col-lg-4">
                                            <label for="" class="column cutom"
                                              >Minimum Monthly Cost</label
                                            >
                                            <input
                                              type="text"
                                              class="form-control cutombox"
                                              formControlName="dhMinimumMonthlyCost"
                                              style="height: 32px"
                                            />
                                          </div>
                                        </div>
                                      </ng-container>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-4">
                    <div style="text-align: right">
                      <!-- <button class="btn btn-sm btn-orange" type="button" style="color: white; margin-left: 2px;">Reset</button> -->
                      <button
                        class="btn btn-sm btn-orange"
                        type="button"
                        style="color: white; margin-left: 2px"
                      >
                        Cancel
                      </button>
                      <button
                        class="btn btn-sm btn-orange"
                        type="submit"
                        style="color: white; margin-left: 2px"
                      >
                        Submit
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div> 
        </div>
        
        <!-- vehicle -->
         
        <div
          class="tab-pane fade"
          id="nav-Vehicle"
          role="tabpanel"
          aria-labelledby="nav-Vehicle-tab"
        >
          <!-- ////////////////////// -->
          <div class="col-lg-12">
            <!-- <ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" [fullScreen]="true" type="ball-spin-clockwise">
              <p style="color: black">Please Wait.. </p>
            </ngx-spinner> -->

            <!-- <div style=" margin-left: 5px; -->
            <!-- margin-right: 5px;"> -->

            <div class="col-lg-12">
              <div class="row">
                <div class="col-lg-10">
                  <div class="fiter">
                    <p style="color: 1D4380; font-weight: 600">
                      <a
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseExample"
                        role="button"
                        aria-expanded="false"
                        aria-controls="collapseExample"
                        style="font-size: 16px"
                      >
                        <i
                          class="fa fa-filter"
                          aria-hidden="true"
                          style="
                            font-size: 20px;
                            color: #1d4380;
                            margin-top: 8px;
                          "
                        ></i
                        >FILTER
                      </a>
                    </p>
                    <div class="collapse" id="collapseExample">
                      <div
                        class="card card-body"
                        style="border: none; box-shadow: none"
                      >
                        <form
                          #filterFormVehicle="ngForm"
                          (ngSubmit)="onVehicleFilter(filterFormVehicle.value)"
                        >
                          <div class="col-lg-12" style="margin-top: -20px">
                            <div class="row">
                              <div class="col-lg-2">
                                <span class="filtor_name">From</span>
                                <input
                                  type="date"
                                  class="form-control cutombox"
                                  required
                                  name="from_date"
                                  ngModel
                                />
                              </div>
                              <div class="col-lg-2">
                                <span class="filtor_name">To</span>
                                <input
                                  type="date"
                                  class="form-control cutombox"
                                  required
                                  name="to_date"
                                  ngModel
                                />
                              </div>

                              <div class="col-lg-2">
                                <button
                                  type="submit"
                                  data-bs-toggle="collapse"
                                  data-bs-target="#collapseExample"
                                  class="btn btn-outline-primary btn-sm"
                                  style="margin-top: 22px"
                                >
                                  Submit
                                </button>
                              </div>
                            </div>
                            &nbsp;
                          </div>
                        </form>
                      </div>
                    </div>
                    <!-- <div class=" " ><i class="fa fa-filter" aria-hidden="true"></i></div>    -->
                  </div>
                </div>
                <div class="col-lg-2 mt-2">
                  <div style="text-align: right">
                    <i
                      class="fa fa-upload d-none"
                      style="font-size: 28px; color: #1D4380; "
                    ></i>
                    &nbsp;&nbsp;
                    <button type="button">
                      <i
                        class="fa fa-plus-circle"
                        aria-hidden="true"
                        style="font-size: 28px; color: #1D4380; "
                        (click)="switch()"
                      ></i>
                    </button>
                  </div>
                </div>
              </div>

              <!-- </div> -->
            </div>
            <div class="container-fluid">
              <div class="row">
                <!-- <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <h5 class="card-title">Vehicle
                      </h5>
                      <div class="row">
                        <div class="col-6">
                          <div id="consSt" class="chart-container"></div>
                        </div>
                        <div class="col-6" style="margin-top: -28px;text-align-last: right;">
                          <img src="assets/images/v.png" alt="Vehicle Status" style="height: 38%;">
                        </div>
                        <div class="col-12 mt-0 custom">
                   
                          <span class="status-text" style="color:rgb(239, 91, 11);" id="numberH">{{vehicleDashboardData?.vehicle?.existing_vehicle}}</span>/
                    
                          <span class="status-text" style="color:#1D4380;" id="numberH">{{vehicleDashboardData?.vehicle?.new_vehicle}}</span>
                        </div>
                      </div>

                      <div class="status-legend mt-1">
                
                        <span style="color:rgb(239, 91, 11);">
                          <i class='fas fa-square-full' style="margin-right: 2px; color: rgb(239, 91, 11);"></i>
                          Existing Vehcile
                        </span>
                
                        <span style="color:#1D4380;">
                          <i class='fas fa-square-full' style="margin-right: 2px; color: #1D4380;"></i> New Vehicle
                        </span>
                      </div>

                    </div>
                  </div>
                </div> -->
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <h5 class="card-title">Vehicle</h5>
                        <img
                          src="assets/images/v.png"
                          alt="Vehicle Status"
                          style="height: 45px; margin-top: 0px"
                        />
                      </div>
                      <div class="row">
                        <div
                          class="col-6"
                          style="width: 150px; height: 150px; margin-top: -42px"
                        >
                          <div id="consSt" class=""></div>
                        </div>
                      </div>
                      <div class="status-legend" style="margin-top: -42px">
                        <div class="col-12" *ngIf="isqVehicleChartLoading">
                          <div
                            class="skeleton col-12 skeleton-checkbox short ms-auto me-0"
                          ></div>
                        </div>
                        <div
                          *ngIf="!isqVehicleChartLoading"
                          class="col-12 mt-0 custom"
                        >
                          <span
                            class="status-text"
                            style="color: rgb(239, 91, 11)"
                            id="numberH"
                            >{{
                              vehicleDashboardData?.vehicle?.existing_vehicle
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #1d4380"
                            id="numberH"
                            >{{
                              vehicleDashboardData?.vehicle?.new_vehicle
                            }}</span
                          >
                        </div>
                        <span style="color: rgb(239, 91, 11)"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: rgb(239, 91, 11)"
                          ></i
                          >Existing Vehicle</span
                        >
                        <span style="color: #1d4380"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #1d4380"
                          ></i
                          >New Vehicle</span
                        >
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Repeat similar structure for other cards -->
                <!-- <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <h5 class="card-title">Type Of Vehicle</h5>
                      <div class="row">
                        <div class="col-6">
                          <div id="tripSt" class="chart-container"></div>
                        </div>
                        <div class="col-6" style="margin-top: -28px;text-align-last: right;">
                          <img src="assets/images/tov.png" alt="Trip Status" style="height: 38%;">
                        </div>
                        <div class="col-12 mt-0 custom">
                          <span class="status-text" style="color:#EC6625;" id="numberH">4</span>/
                          
                          <span class="status-text" style="color:#1D4380;" id="numberH">10</span>/
                          <span class="status-text" style="color:#613704;" id="numberH">10</span>

                        </div>
                      </div>
                      <div class="status-legend mt-1">
                        <span style="color:#EC6625;"><i class='fas fa-square-full'
                            style="margin-right: 2px; color: #EC6625;"></i>Heavy Duty</span>
                        <span style="color: #1D4380 ;"><i class='fas fa-square-full'
                            style="margin-right: 2px; color: #1D4380;"></i>Medium Duty
                        </span>
                        <span style="color: #613704 ;"><i class='fas fa-square-full'
                            style="margin-right: 2px; color: #613704;"></i>Light Duty
                        </span>


                      </div>
                    </div>
                  </div>
                </div> -->

                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <h5 class="card-title">Body Type</h5>
                        <img
                          src="assets/images/tov.png"
                          alt="Delivery Status"
                          style="height: 45px; margin-top: 0px"
                        />
                      </div>
                      <div class="row">
                        <div
                          class="col-6"
                          style="width: 150px; height: 150px; margin-top: -42px"
                        >
                          <div id="deliverySt" class=""></div>
                        </div>
                      </div>
                      <div class="status-legend" style="margin-top: -42px">
                        <div class="col-12" *ngIf="isqVehicleChartLoading">
                          <div
                            class="skeleton col-12 skeleton-checkbox short ms-auto me-0"
                          ></div>
                        </div>
                        <div
                          *ngIf="!isqVehicleChartLoading"
                          class="col-12 mt-0 custom"
                        >
                          <span
                            class="status-text"
                            style="color: #ec6625"
                            id="numberH"
                            >{{
                              vehicleDashboardData?.body_type?.open_body
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #1d4380"
                            id="numberH"
                            >{{
                              vehicleDashboardData?.body_type?.closed_body
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: rgb(253, 195, 5)"
                            id="numberH"
                            >{{
                              vehicleDashboardData?.body_type?.container
                            }}</span
                          >
                        </div>
                        <span style="color: #ec6625"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #ec6625"
                          ></i
                          >Open Body</span
                        >
                        <span style="color: #1d4380"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #1d4380"
                          ></i
                          >Closed Body</span
                        >
                        <span style="color: rgb(253, 195, 5)"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: rgb(253, 195, 5)"
                          ></i
                          >Container</span
                        >
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Repeat similar structure for other cards -->
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <h5 class="card-title">Vehicle Rating</h5>
                        <img
                          src="assets/images/vr.png"
                          alt="Vehicle Status"
                          style="height: 45px; margin-top: 0px"
                        />
                      </div>
                      <div class="row">
                        <div
                          class="col-9"
                          style="width: 150px; height: 150px; margin-top: -42px"
                        >
                          <div id="vehicleSt" class=""></div>
                        </div>
                      </div>
                      <div class="status-legend" style="margin-top: -42px">
                        <div class="col-12" *ngIf="isqVehicleChartLoading">
                          <div
                            class="skeleton col-12 skeleton-checkbox short ms-auto me-0"
                          ></div>
                        </div>
                        <div
                          *ngIf="!isqVehicleChartLoading"
                          class="col-12 mt-0 custom"
                        >
                          <span
                            class="status-text"
                            style="color: #ec6625"
                            id="numberH"
                            >{{
                              vehicleDashboardData?.vehicle_rating
                                ?.less_than_two
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #1d4380"
                            id="numberH"
                            >{{
                              vehicleDashboardData?.vehicle_rating?.two_to_four
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #613704"
                            id="numberH"
                            >{{
                              vehicleDashboardData?.vehicle_rating
                                ?.more_than_four
                            }}</span
                          >
                        </div>
                        <span style="color: #ec6625"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #ec6625"
                          ></i
                          >Less Than 2</span
                        >
                        <span style="color: #1d4380"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #1d4380"
                          ></i
                          >2 To 4</span
                        >
                        <span style="color: #613704"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #613704"
                          ></i
                          >More Than 4</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- //////////////////////////////////////////////////////////////////////////////////////// -->
            <div class="row mt-2">
              <div style="text-align: left">
                <button
                  [disabled]="!selectVehicleIds.length"
                  class="btn btn-sm btn-green"
                  type="submit"
                  style="color: white; background-color: green"
                  (click)="
                    updateVehicleStatus('active', filterFormVehicle.value)
                  "
                >
                  Activate
                </button>
                <button
                  [disabled]="!selectVehicleIds.length"
                  class="btn btn-sm btn-orange"
                  type="submit"
                  style="
                    color: white;
                    margin-left: 2px;
                    background-color: orange;
                  "
                  (click)="
                    updateVehicleStatus('de-active', filterFormVehicle.value)
                  "
                >
                  Deactivate
                </button>
                <!-- <button
                  [disabled]="!selectVehicleIds.length"
                  class="btn btn-sm btn-blue"
                  type="submit"
                  style="
                    color: white;
                    margin-left: 2px;
                    background-color: #1d4380;
                  "
                  (click)="
                    updateVehicleStatus('delete', filterFormVehicle.value)
                  "
                >
                  Delete
                </button> -->
              </div>
            </div>
            <!-- /////////////////////////////////////////// -->
            <div class="info mt-2">
              <table
                class="table"
                cellspacing="0"
                id="masterUpload"
                width="100%"
              >
                <thead>
                  <tr style="text-align: center; white-space: nowrap">
                    <th class="table-primary">
                      <input
                        type="checkbox"
                        (change)="qtoggleVehcileAllSelection()"
                        [checked]="qallVehicleSelected"
                      />
                    </th>
                    <th class="table-primary">SL</th>
                    <th class="table-primary">Category</th>
                    <th class="table-primary">Make & Model</th>
                    <th class="table-primary">Vehicle Number</th>
                    <th class="table-primary">Type</th>
                    <th class="table-primary">Reg. No.</th>
                    <th class="table-primary">Reg. Date</th>
                    <th class="table-primary">Capacity</th>
                    <th class="table-primary">Fuel Type</th>
                    <th class="table-primary">Speed Limit</th>
                    <th class="table-primary">Vehicle Documents</th>

                    <!-- <th class="table-primary">Remarks</th> -->
                    <th class="table-primary">Status</th>
                    <th class="table-primary">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngIf="isLoadingVehicleTable">
                    <tr
                      *ngFor="let i of [1, 2, 3, 4, 5]"
                      style="white-space: nowrap; text-align: center"
                    >
                      <td><div class="skeleton skeleton-checkbox"></div></td>
                      <td><div class="skeleton skeleton-text short"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text long"></div></td>
                      <td><div class="skeleton skeleton-text short"></div></td>
                      <td><div class="skeleton skeleton-text short"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text long"></div></td>
                      <td><div class="skeleton skeleton-text short"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                    </tr>
                  </ng-container>
                  <ng-container *ngIf="!isLoadingVehicleTable">
                    <tr
                      style="white-space: nowrap; text-align: center"
                      *ngFor="let item of vehicleTableData; let i = index"
                    >
                      <td>
                        <!-- <input class="vehiclecheck" type="checkbox"  > -->
                        <input
                          type="checkbox"
                          class="vehiclecheck"
                          [checked]="isVehicleSelected(item?.vehicle?.id)"
                          id="checkbox-{{ item?.vehicle?.id }}"
                          required
                          (change)="qtoggleVehicleSelection(item?.vehicle?.id)"
                          class="checkbox"
                        />
                      </td>
                      <td>{{ i + 1 }}</td>
                      <td>
                        {{
                          vehicleCategory[item?.vehicle?.vehicle_category_id]
                        }}
                      </td>
                      <td>
                        {{ vehicleMake[item?.vehicle?.vehicle_make_id] }}-{{
                          vehicleModel[item?.vehicle?.vehicle_model_id]
                        }}
                      </td>
                      <td>{{ item?.vehicle?.vehicle_number || "" }}</td>
                      <td>
                        {{ vehicleBodyType[item?.vehicle?.body_type_id] || "" }}
                      </td>
                      <td>{{ item?.vehicle?.registration_no || "" }}</td>
                      <td>{{ item?.vehicle?.registration_date || "" }}</td>
                      <td>
                        {{
                          vehicleCapacityType[
                            item?.vehicle?.vehicle_capacity_tons
                          ]
                            ? vehicleCapacityType[
                                item?.vehicle?.vehicle_capacity_tons
                              ] + " tons"
                            : ""
                        }}
                      </td>
                      <td>
                        {{ vehicleFuelType[item?.vehicle?.fuel_type] || "" }}
                      </td>
                      <td>{{ item?.vehicle?.max_speed || "" }}</td>
              
                      <td
                        class="align-left"
                        style="text-align: left !important"
                      >
                        <a
                          *ngIf="getDocumentPath(item, 5)"
                          type="button"
                          [href]="getDocumentPath(item, 5)"
                          download="reg_certificate.png"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/RC.png"
                            alt="Registration Certificate"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="getDocumentPath(item, 6)"
                          type="button"
                          [href]="getDocumentPath(item, 6)"
                          download="pollution_certificate.png"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Pollution Certificate.png"
                            alt="Pollution Certificate"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="getDocumentPath(item, 10)"
                          type="button"
                          [href]="getDocumentPath(item, 10)"
                          download="national_goods_permit.png"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/National Goods Permit.png"
                            alt="National Goods Permit"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="getDocumentPath(item, 7)"
                          type="button"
                          [href]="getDocumentPath(item, 7)"
                          download="insurance_certificate.png"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Insurance.png"
                            alt="Insurance Certificate"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="getDocumentPath(item, 13)"
                          type="button"
                          [href]="getDocumentPath(item, 13)"
                          download="fitness_certificate.png"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Fitness.png"
                            alt="Fitness Certificate"
                            class="cssss"
                          />
                        </a>
                      </td>
                      <td>
                        <span [ngClass]="{
                          'qstatus-base': true,
                          'qpill-green': item?.vehicle?.status === 1,
                          'qpill-yellow': item?.vehicle?.status === 2,
                          'qpill-red': item?.vehicle?.status === 0
                        }">
                          {{ item?.vehicle?.status === 1 ? 'Active' : item?.vehicle?.status === 2 ? 'Deactive' : 'Deleted' }}
                        </span>
                      </td>
                      <td>
                        <img
                          src="assets/images/action.png"
                          alt="action"
                          (click)="switch(item)"
                          style="cursor: pointer; height: 24px"
                        />
                      </td>
                    </tr>
                  </ng-container>
                </tbody>
              </table>
            </div>
          </div>
          <!-- ////////////////////// -->
        </div>

        <!-- ---------------------------------------------- -->
        <!-- driver -->

        <!-- ////////////////////////////////////////////////// -->
        <div
          class="tab-pane fade"
          id="nav-Driver"
          role="tabpanel"
          aria-labelledby="nav-Driver-tab"
        >
          <div class="col-lg-12">
            <div class="col-lg-12">
              <div class="row">
                <div class="col-lg-10">
                  <div class="fiter">
                    <p style="color: 1D4380; font-weight: 600">
                      <a
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseExample"
                        role="button"
                        aria-expanded="false"
                        aria-controls="collapseExample"
                        style="font-size: 16px"
                      >
                        <i
                          class="fa fa-filter"
                          aria-hidden="true"
                          style="
                            font-size: 20px;
                            color: #1d4380;
                            margin-top: 8px;
                          "
                        ></i
                        >FILTER
                      </a>
                    </p>
                    <div class="collapse" id="collapseExample">
                      <div
                        class="card card-body"
                        style="border: none; box-shadow: none"
                      >
                        <form
                          #filterFormD="ngForm"
                          (ngSubmit)="onFilterDriver(filterFormD.value)"
                        >
                          <div class="col-lg-12" style="margin-top: -20px">
                            <div class="row">
                              <div class="col-lg-2">
                                <span class="filtor_name">From</span>
                                <input
                                  type="date"
                                  class="form-control cutombox"
                                  required
                                  name="from_timeD"
                                  ngModel
                                />
                              </div>
                              <div class="col-lg-2">
                                <span class="filtor_name">To</span>
                                <input
                                  type="date"
                                  class="form-control cutombox"
                                  required
                                  name="to_timeD"
                                  ngModel
                                />
                              </div>
                              <div class="col-lg-2">
                                <button
                                  type="submit"
                                  class="btn btn-outline-primary btn-sm"
                                  style="margin-top: 22px"
                                >
                                  Submit
                                </button>
                              </div>
                            </div>
                            &nbsp;
                          </div>
                        </form>
                      </div>
                    </div>
                    <!-- <div class=" " ><i class="fa fa-filter" aria-hidden="true"></i></div>    -->
                  </div>
                </div>
                <div class="col-lg-2 mt-2">
                  <div style="text-align: right">
                    <i
                      class="fa fa-upload d-none"
                      style="font-size: 28px; color: #1D4380; "
                    ></i>
                    &nbsp;&nbsp;
                    <button type="button">
                      <i
                        class="fa fa-plus-circle"
                        aria-hidden="true"
                        style="font-size: 28px; color: #1D4380; "
                        (click)="switch2()"
                      ></i>
                    </button>
                  </div>
                </div>
              </div>

              <!-- </div> -->
            </div>

            <!-- </div> -->
            <div class="container-fluid">
              <div class="row">
                <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <h5 class="card-title">Drivers Enrollment</h5>
                        <img
                          src="assets/images/d.png"
                          alt="Vehicle Status"
                          style="height: 45px; margin-top: 0px"
                        />
                      </div>

                      <div class="row">
                        <div
                          class="col-6"
                          style="width: 150px; height: 150px; margin-top: -42px"
                        >
                          <div id="DconsSt" class=""></div>
                        </div>
                      </div>
                      <!-- <div class="row">
                        <div class="col-6 mt-4" >
                          <div id="DconsSt" class="chart-container" style="height: 150px;"></div>
                        </div>
                        <div class="col-6" style="margin-top: -33px;text-align-last: right;">
                          <img src="assets/images/d.png" alt="Vehicle Status" style="height:38%;">
                        </div>
                        <div class="col-12 mt-0 custom">
                          <span class="status-text" style="color:rgb(239, 91, 11);" id="numberH">{{driverDashboardData?.Driver_Enrollment?.Authenticated_Drivers}}</span>/
                     
                          <span class="status-text" style="color:#1D4380;" id="numberH">{{driverDashboardData?.Driver_Enrollment?.Enrolled_Drivers}}</span>
                        </div>
                      </div> -->
                      <div class="status-legend" style="margin-top: -42px">
                        <div class="col-12" *ngIf="isqDriverChartLoading">
                          <div
                            class="skeleton col-12 skeleton-checkbox short ms-auto me-0"
                          ></div>
                        </div>
                        <div
                          *ngIf="!isqDriverChartLoading"
                          class="col-12 mt-0 custom"
                        >
                          <span
                            class="status-text"
                            style="color: rgb(239, 91, 11)"
                            id="numberH"
                            >{{
                              driverDashboardData?.Driver_Enrollment
                                ?.Authenticated_Drivers
                            }}</span
                          >
                          /
                          <span
                            class="status-text"
                            style="color: #1d4380"
                            id="numberH"
                            >{{
                              driverDashboardData?.Driver_Enrollment
                                ?.Enrolled_Drivers
                            }}</span
                          >
                        </div>
                        <span style="color: rgb(239, 91, 11)">
                          <i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: rgb(239, 91, 11)"
                          ></i>
                          Authenticated Drivers
                        </span>
                        <span style="color: #1d4380">
                          <i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #1d4380"
                          ></i>
                          Enrolled Drivers
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Repeat similar structure for other cards -->
                <!-- <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <h5 class="card-title">Type Of Vehicle</h5>
                      <div class="row">
                        <div class="col-6">
                          <div id="DtripSt" class="chart-container"></div>
                        </div>
                        <div class="col-6" style="margin-top: -28px;text-align-last: right;">
                          <img src="assets/images/tov.png" alt="Trip Status" style="height: 38%;">
                        </div>
                        <div class="col-12 mt-0 custom">
                          <span class="status-text" style="color:#EC6625;" id="numberH">{{driverDashboardData?.Vehicle_Types?.Heavy_Duty}}</span>/
                       
                          <span class="status-text" style="color:#1D4380;" id="numberH">{{driverDashboardData?.Vehicle_Types?.Medium_Duty}}</span>/
                          <span class="status-text" style="color:#613704;" id="numberH">{{driverDashboardData?.Vehicle_Types?.Light_Duty}}</span>

                        </div>
                      </div>
                      <div class="status-legend mt-1">
                        <span style="color:#EC6625;"><i class='fas fa-square-full'
                            style="margin-right: 2px; color: #EC6625;"></i>Heavy Duty</span>
                        <span style="color: #1D4380 ;"><i class='fas fa-square-full'
                            style="margin-right: 2px; color: #1D4380;"></i>Medium Duty
                        </span>
                        <span style="color: #613704 ;"><i class='fas fa-square-full'
                            style="margin-right: 2px; color: #613704;"></i>Light Duty
                        </span>


                      </div>
                    </div>
                  </div>
                </div> -->
                <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <h5 class="card-title">Type Of Vehicle</h5>
                        <img
                          src="assets/images/tov.png"
                          alt="Vehicle Status"
                          style="height: 45px; margin-top: 0px"
                        />
                      </div>

                      <div class="row">
                        <div
                          class="col-6"
                          style="width: 150px; height: 150px; margin-top: -42px"
                        >
                          <div id="DtripSt" class=""></div>
                        </div>
                      </div>
                      <div class="status-legend" style="margin-top: -42px">
                        <div class="col-12" *ngIf="isqDriverChartLoading">
                          <div
                            class="skeleton col-12 skeleton-checkbox short ms-auto me-0"
                          ></div>
                        </div>
                        <div
                          *ngIf="!isqDriverChartLoading"
                          class="col-12 mt-0 custom"
                        >
                          <span
                            class="status-text"
                            style="color: #ec6625"
                            id="numberH"
                            >{{
                              driverDashboardData?.Vehicle_Types?.Heavy_Duty
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #1d4380"
                            id="numberH"
                            >{{
                              driverDashboardData?.Vehicle_Types?.Medium_Duty
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #613704"
                            id="numberH"
                            >{{
                              driverDashboardData?.Vehicle_Types?.Light_Duty
                            }}</span
                          >
                        </div>
                        <span style="color: #ec6625"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #ec6625"
                          ></i
                          >Heavy Duty</span
                        >
                        <span style="color: #1d4380"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #1d4380"
                          ></i
                          >Medium Duty
                        </span>
                        <span style="color: #613704"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #613704"
                          ></i
                          >Light Duty
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Repeat similar structure for other cards -->
                <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <h5 class="card-title">Driver Experience</h5>
                        <img
                          src="assets/images/bt.png"
                          alt="Driver Experience"
                          style="height: 45px; margin-top: 0px"
                        />
                      </div>
                      <div class="row">
                        <div
                          class="col-6"
                          style="width: 150px; height: 150px; margin-top: -42px"
                        >
                          <div id="DdeliverySt"></div>
                        </div>
                      </div>
                      <div class="status-legend" style="margin-top: -42px">
                        <div class="col-12" *ngIf="isqDriverChartLoading">
                          <div
                            class="skeleton col-12 skeleton-checkbox short ms-auto me-0"
                          ></div>
                        </div>
                        <div
                          *ngIf="!isqDriverChartLoading"
                          class="col-12 mt-0 custom"
                        >
                          <span
                            class="status-text"
                            style="color: #ec6625"
                            id="numberH"
                            >{{
                              driverDashboardData?.Driver_Experience
                                ?.Less_than_5_yrs
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #1d4380"
                            id="numberH"
                            >{{
                              driverDashboardData?.Driver_Experience
                                ?.Between_5_to_10_yrs
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #613704"
                            id="numberH"
                            >{{
                              driverDashboardData?.Driver_Experience
                                ?.More_than_10_yrs
                            }}</span
                          >
                        </div>
                        <span style="color: #ec6625"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #ec6625"
                          ></i
                          >Less than 5</span
                        >
                        <span style="color: #1d4380"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #1d4380"
                          ></i
                          >5Yrs to 10 Yrs</span
                        >
                        <span style="color: #613704"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #613704"
                          ></i
                          >More than 10 Yrs</span
                        >
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Repeat similar structure for other cards -->
                <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-0">
                  <div class="card status-card">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <h5 class="card-title">Driver Rating</h5>
                        <img
                          src="assets/images/vr.png"
                          alt="Driver Rating"
                          style="height: 45px; margin-top: 0px"
                        />
                      </div>
                      <div class="row">
                        <div
                          class="col-6"
                          style="width: 150px; height: 150px; margin-top: -42px"
                        >
                          <div id="DvehicleSt" class=""></div>
                        </div>
                      </div>
                      <div class="status-legend" style="margin-top: -42px">
                        <div class="col-12" *ngIf="isqDriverChartLoading">
                          <div
                            class="skeleton col-12 skeleton-checkbox short ms-auto me-0"
                          ></div>
                        </div>
                        <div
                          class="col-12 mt-0 custom"
                          *ngIf="!isqDriverChartLoading"
                        >
                          <span
                            class="status-text"
                            style="color: #ec6625"
                            id="numberH"
                            >{{
                              driverDashboardData?.Driver_Rating?.Less_than_2
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #1d4380"
                            id="numberH"
                            >{{
                              driverDashboardData?.Driver_Rating?.Between_2_to_4
                            }}</span
                          >/
                          <span
                            class="status-text"
                            style="color: #613704"
                            id="numberH"
                            >{{
                              driverDashboardData?.Driver_Rating?.More_than_4
                            }}</span
                          >
                        </div>
                        <span style="color: #ec6625"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #ec6625"
                          ></i
                          >Less Than 2</span
                        >
                        <span style="color: #1d4380"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #1d4380"
                          ></i
                          >2 To 4</span
                        >
                        <span style="color: #613704"
                          ><i
                            class="fas fa-square-full"
                            style="margin-right: 2px; color: #613704"
                          ></i
                          >More Than 4</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- //////////////////////////////////////////////////////////////////////////////////////// -->
            <div class="container-fuild">
              <div class="row mt-2">
                <div style="text-align: left">
                  <button
                    [disabled]="!selectedDriverIds.length"
                    class="btn btn-sm btn-green"
                    type="button"
                    (click)="updateDriverStatus('Authorize', filterFormD.value)"
                    style="color: white; background-color: green"
                  >
                    Verify
                  </button>
                  <button
                    [disabled]="!selectedDriverIds.length"
                    class="btn btn-sm btn-orange"
                    type="button"
                    (click)="
                      updateDriverStatus('Deactivate', filterFormD.value)
                    "
                    style="
                      color: white;
                      margin-left: 2px;
                      background-color: orange;
                    "
                  >
                    Deactivate
                  </button>
                  <button
                    [disabled]="!selectedDriverIds.length"
                    class="btn btn-sm btn-blue"
                    type="button"
                    (click)="updateDriverStatus('Activate', filterFormD.value)"
                    style="
                      color: white;
                      margin-left: 2px;
                      background-color: #1d4380;
                    "
                  >
                    Activate
                  </button>
                  <!-- <button class="btn btn-sm btn-blue" type="button" (click)="updateDriverStatus('Delete')" style="color: white;margin-left: 2px; background-color: rgb(191, 59, 59);">Delete</button> -->
                  <!-- <button class="btn btn-sm btn-blue" type="button" (click)="updateDriverStatus('Authorize')" style="color: white;margin-left: 2px; background-color: #23272d;">Authorized</button> -->
                </div>
              </div>
            </div>
            <!-- /////////////////////////////////////////// -->
            <div class="container-fuild mt-2">
              <table
                class="table"
                cellspacing="0"
                id="DmasterUpload"
                width="100%"
              >
                <thead>
                  <tr style="text-align: center; white-space: nowrap">
                    <th class="table-primary">
                      <input
                        type="checkbox"
                        (change)="toggleDriverAllSelection()"
                        [checked]="allDriverSelected"
                      />
                    </th>
                    <th class="table-primary">SL</th>
                    <th class="table-primary">Driver Name</th>
                    <th class="table-primary">Gender</th>
                    <th class="table-primary">Vehicle Driving type</th>
                    <th class="table-primary">Driving Experience (Years)</th>
                    <th class="table-primary">Birth Date</th>
                    <th class="table-primary">Mobile Number</th>
                    <th class="table-primary">E-Mail</th>
                    <th class="table-primary">Address</th>
                    <th class="table-primary">Documents</th>
                    <th class="table-primary">Status</th>
                    <th class="table-primary">Action</th>
                  </tr>
                </thead>
                <!-- <tbody>

                  <tr style="white-space: nowrap;text-align: center;">
                    <td></td>
                 
                    <td></td>
                    <td></td>
                   
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><img src="assets/images/action.png" alt="action"  style="cursor: pointer;"></td>




                  </tr>

                </tbody> -->
                <tbody>
                  <!-- Skeleton Rows -->
                  <ng-container *ngIf="isLoadingDriverTable">
                    <tr
                      *ngFor="let i of [1, 2, 3, 4, 5]"
                      style="white-space: nowrap; text-align: center"
                    >
                      <td><div class="skeleton skeleton-checkbox"></div></td>
                      <td><div class="skeleton skeleton-text short"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text long"></div></td>
                      <td><div class="skeleton skeleton-text short"></div></td>
                      <td><div class="skeleton skeleton-text short"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                      <td><div class="skeleton skeleton-text long"></div></td>
                      <td><div class="skeleton skeleton-text short"></div></td>
                      <td><div class="skeleton skeleton-text medium"></div></td>
                    </tr>
                  </ng-container>
                  <ng-container *ngIf="!isLoadingDriverTable">
                    <tr
                      *ngFor="let item of driverTableData; let ind = index"
                      style="white-space: nowrap; text-align: center"
                    >
                      <td>
                        <div class="form-check" style="margin-right: 13px">
                          <!-- <input *ngIf="item?.Raised_By === 'customer'" class="form-check-input" type="checkbox"
                             [checked]="isSelected(item?._id)" id="checkbox-{{ind}}" required
                             (change)="toggleSelection(item?._id)"> -->
                          <input
                            type="checkbox"
                            [checked]="isDriverSelected(item?.DriverId)"
                            id="checkbox-{{ ind }}"
                            required
                            (change)="toggleDriverSelection(item?.DriverId)"
                            class="checkbox"
                          />
                        </div>
                      </td>
                      <td>{{ ind + 1 }}</td>
                      <td>{{ item?.Name }}</td>
                      <td>{{ item?.Gender }}</td>
                      <td>{{ item?.VehicleDutyType }}</td>
                      <td>{{ item?.DrivingExpYrs }}</td>
                      <td>{{ item?.BirthDate }}</td>
                      <th>{{ item?.MobileNo }}</th>
                      <td>{{ item?.Email }}</td>
                      <td>{{ item?.Address }}</td>
                      <td
                        class="align-left"
                        style="text-align: left !important"
                      >
                        <a
                          *ngIf="item?.Documents?.AadhaarCard"
                          type="button"
                          href="{{ item?.Documents?.AadhaarCard?.Path }}"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Aadhar.png"
                            alt="adhaar card"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="item?.Documents?.DrivingLicense"
                          type="button"
                          href="{{ item?.Documents?.DrivingLicense?.Path }}"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Driving License.png"
                            alt="Pollution Certificate"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="item?.Documents?.PanCard"
                          type="button"
                          href="{{ item?.Documents?.PanCard?.Path }}"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Pan Card.jpg"
                            alt="Pan card"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="item?.Documents?.Photograph"
                          type="button"
                          href="{{ item?.Documents?.Photograph?.Path }}"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Aadhar.png"
                            alt="National Goods Permit"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="item?.Documents?.VoterId"
                          type="button"
                          href="{{ item?.Documents?.VoterId?.Path }}"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Voter id card.jpg"
                            alt="VoterId"
                            class="cssss"
                          />
                        </a>
                        <a
                          *ngIf="item?.Documents?.Passport"
                          type="button"
                          href="{{ item?.Documents?.Passport?.Path }}"
                          target="_blank"
                        >
                          <img
                            src="assets/icon/Icon/Passport.png"
                            alt="passport"
                            class="cssss"
                          />
                        </a>
                      </td>
                      <td ><span [ngClass]="{
                        'qstatus-base': true,
                        'qpill-green': item?.Status.startsWith('Active'),
                        'qpill-yellow ': item?.Status.startsWith('Deactive'),
                        'qpill-red ': item?.Status.startsWith('Delete')
                      }">
                      {{ item?.Status }}
                      </span></td>
                      <td>
                        <img
                          (click)="editDriver(item)"
                          src="assets/images/action.png"
                          alt="action"
                          style="cursor: pointer; height: 24px"
                        />
                      </td>
                      <!-- 
                      <td *ngIf="hide_column">{{item.Vehicle_Contracted}}</td>
                      <td *ngIf="hide_column">{{item.Vehicle_Used}}</td>
                      <td *ngIf="hide_column">{{item.Vehicle_Use_In_Current_Month}}</td>
                      <td *ngIf="hide_column">{{item.Vehicle_Currently_In_Use}}</td>
                      <td *ngIf="hide_column">{{item.Recommendation_IN_Priority}}</td>
                      <td  *ngIf="hide_column">{{item.Vehicle_Remaining}}</td> -->

                      <!-- <td><button type="button" style="    font-size: 15px; font-weight: bold;
                        color: green"[ngStyle]="{'color': getButtonColor(item.Transporter_Score)}" >Request</button> </td> -->
                    </tr>
                  </ng-container>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- mill -->
        <!-- <div class="tab-pane fade" id="nav-Mill" role="tabpanel" aria-labelledby="nav-Mill-tab">
        
          <div class="row" style="padding: 38px; margin: 30px;">
           
            <div class="col-lg-12">
              <div class="custume">
                <div class="chart-container" id="chartContainer" style="position: relative;">
                  <canvas id="myChart" height="95"></canvas>
                </div>
              </div>
            </div>
          </div>
          
          <div class="info">
            <table class=" table" cellspacing="0" id="masterUpload4" width="100%">
              <thead>
                <tr style="text-align: center; white-space: nowrap;">
                  <th class="table-primary">Mill</th>
                  <th class="table-primary">Total Challan</th>
                  <th class="table-primary">Tracked Vehicles</th>
  
                  <th class="table-primary">Total UN-AUTHORIZED LOCATION</th>
                
                  <th class="table-primary">%</th>
                </tr>
              </thead>
              <tbody>
                <tr  *ngFor="let item of MillData;let ind =index" style="white-space: nowrap;text-align: center;">
                 
                  <td>{{item.mill}}</td>
                  <td>{{item.total_challan}}</td>
                  <td>{{item.tracked_vehicles}}</td>
                  <td>{{item.total_unauthorized_location}}</td>
                  <td>{{item.unauthorized_location_percentage}}</td>
                 
                </tr>
              
              </tbody>
            </table>
          </div>
        
        </div>
        <div class="tab-pane fade" id="nav-Transporter" role="tabpanel" aria-labelledby="nav-Transporter-tab">
        
          <div class="row" style="padding: 38px; margin: 30px;">
           
            <div class="col-lg-12">
              <div class="custume">
                <div class="chart-container" id="chartContainer" style="position: relative;">
                  <canvas id="myChart" height="95"></canvas>
                </div>
              </div>
            </div>
          </div>
        
          <div class="info">
            <table class="  table" cellspacing="0" id="masterUpload5" width="100%">
              <thead>
                <tr style="text-align: center; white-space: nowrap;">
                  <th class="table-primary">Total Challan</th>
                  <th class="table-primary">Tracked Vehicles</th>
                  <th class="table-primary">Total RED Flag</th>
                  <th class="table-primary">%</th>
                  <th class="table-primary">Total Minor Flag</th>
                  <th class="table-primary">%</th>
                  <th class="table-primary">Total UN-AUTHORIZED LOCATION</th>
                  <th class="table-primary">%</th>
                  <th class="table-primary">Total ROUTE DEVIATION</th>
                  <th class="table-primary">%</th>
                  <th class="table-primary">Total FORCE CLOSED</th>
                  <th class="table-primary">%</th>
                  <th class="table-primary">Total Score</th>
                  <th class="table-primary">AVG KPI Score</th>
                  <th class="table-primary">Sum of Good Trip</th>
                  <th class="table-primary">%</th>
                  <th class="table-primary">Alert Closed</th>
                  <th class="table-primary">%</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of TransporterData;let ind =index" style="white-space: nowrap;text-align: center;">
               
                <td>{{item.total_challan}}</td>
                <td>{{item.tracked_vehicles}}</td>
                <td>{{item.total_red_flag}}</td>
                <td>{{item.red_flag_percentage}}</td>
                <td>{{item.total_minor_flag}}</td>
                <td>{{item.minor_flag_percentage}}</td>
                <td>{{item.total_unauthorized_location}}</td>
                <td>{{item.unauthorized_location_percentage}}</td>
                <td>{{item.total_route_deviation}}</td>
                <td>{{item.route_deviation_percentage}}</td>
                <td>{{item.total_forced_closed}}</td>
                <td>{{item.forced_closed_percentage}}</td>
                <td>{{item.total_score}}</td>
                <td>{{item.average_kpi_score}}</td>
                <td>{{item.sum_of_good_trips}}</td>
                <td>{{item.good_trip_percentage}}</td>
                <td></td>
                <td></td>
              </tr>
              </tbody>
            </table>
          </div>
      
        </div> -->
      </div>
    </div>
  </div>
</div>

<!-- //////////////////////////saumya  modal//////////////////////// -->
<!-- ORDER MODAL OF ASSIGN VEHICLE -->
<div
  class="modal fade"
  id="desklastalertModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" style="max-width: 78vw">
    <ngx-spinner
      bdColor="rgba(51, 51, 51, 0.8)"
      size="default"
      name="spniiner-1"
      [fullScreen]="false"
      type="ball-spin-clockwise"
    >
    </ngx-spinner>
    <div class="modal-content" style="height: 634px; overflow: scroll">
      <!-- (ngSubmit)="Assign_vehicle_Addsubmit()" -->
      <form [formGroup]="Assign_vehicle">
        <div class="modal-header" style="background-color: white">
          <div style="display: inline-table"></div>
          &nbsp;
          <button
            class="btn-close btn-sm"
            id="btnUncheckAll"
            data-bs-dismiss="modal"
            aria-label="Close"
            (click)="clearAllForms()"
          ></button>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-lg-11"></div>
            <div class="col-lg-1" style="text-align: center">
              <!--  [disabled]="!Assign_vehicle.valid" -->
              <button
                (click)="accordian_increase()"
                [disabled]="!Assign_vehicle.valid"
              >
                <i class="fa fa-plus" style="font-size: 20px"></i>
              </button>
            </div>
          </div>

          <div class="accordion-shadow">
            <ngb-accordion
              #accordion="ngbAccordion"
              [destroyOnHide]="false"
              [closeOthers]="true"
              (panelChange)="panelShadow($event, shadow)"
              #shadow
              formArrayName="invoicearray"
            >
              <ng-container>
                <ngb-panel
                  *ngFor="let i of getinvoice().controls; let idx = index"
                  [formGroupName]="idx"
                  [id]="'panel-' + idx"
                >
                  <ng-template ngbPanelTitle style="padding: 0px">
                    <!-- <i class="fa fa-minus-circle plusicon"></i> style="height: 384px;
    overflow: auto;" -->
                    <div class="row">
                      <div class="col-lg-2">
                        <div class="acc-set">Assign Vehicle {{ idx + 1 }}</div>
                      </div>
                      <div class="col-lg-8"></div>
                      <div class="col-lg-2" style="text-align: end">
                        <a class="v-button me-2" title="Edit"
                          ><i class="fa fa-edit csstab"></i>
                        </a>
                        <a
                          class="v-button me-2"
                          (click)="delete_accordian(idx)"
                          title="Delete"
                        >
                          <i class="far fa-times-circle csstab"></i
                        ></a>

                        <!-- <button class="accordion-button custom" type="button" >
                             
                            </button> -->
                        <a class="v-button me-2">
                          <!-- <i class="fa-solid fa-chevron-down  plusicon csstab"></i> -->
                          <i class="fa fa-minus-circle plusicon csstab"></i>
                        </a>
                      </div>
                    </div>
                  </ng-template>
                  <ng-template ngbPanelContent [ngbCollapse]="isCollapsed[idx]">
                    <!-- <div class=""> -->
                    <div class="row">
                      <div class="col-lg-2">
                        <Span class="number-v"
                          >Assign Vehicle {{ idx + 1 }}</Span
                        >
                      </div>
                      <div class="col-lg-10"></div>
                    </div>
                    <div class="row mt-2">
                      <div class="col-lg-3">
                        <span class="filtor_name">Vehicle Number</span>
                        <ng-select
                          name="Bookingtype"
                          formControlName="Vehicle"
                          [ngClass]="{
                            'input-error': isCheckboxInvalid(idx, 'Vehicle')
                          }"
                          style="font-size: 14px; font-weight: 400"
                          [closeOnSelect]="true"
                          (change)="Get_vehicle($event.vehicle_id, idx)"
                        >
                          <ng-option value="" selected>Select</ng-option>

                          <ng-option
                            [value]="item"
                            *ngFor="let item of Vehicle_list"
                            >{{ item.vehicle_no }}</ng-option
                          >
                        </ng-select>
                      </div>
                      <div class="col-lg-3">
                        <span class="filtor_name">Vehicle Capacity</span>
                        <input
                          type="text"
                          class="form-control"
                          placeholder="Vehicle Capacity"
                          required
                          [ngClass]="{
                            'input-error': isCheckboxInvalid(idx, 'Capacity')
                          }"
                          formControlName="Capacity"
                          style="background-color: white"
                          [value]="
                            Vehiclefull_information[idx]?.vehicle_data
                              ?.vehicle_capacity_tons
                          "
                        />
                      </div>
                      <div class="col-lg-3">
                        <span class="filtor_name">Vehicle Type</span>

                        <input
                          type="text"
                          class="form-control"
                          placeholder="Vehicle Type"
                          required
                          [ngClass]="{
                            'input-error': isCheckboxInvalid(idx, 'Type')
                          }"
                          formControlName="Type"
                          style="background-color: white"
                          [value]="
                            Vehiclefull_information[idx]?.vehicle_data
                              ?.vehicle_type
                          "
                        />
                        <!-- <ng-select name="Vehicletype" formControlName="Type" style="font-size: 14px;font-weight: 400;"
                          [closeOnSelect]="true">

                          <ng-option value="" selected>Select</ng-option>
                          <ng-option value="1">UP45621</ng-option>
                          <ng-option value="2">UP87878</ng-option>
                          <ng-option [value]="item" *ngFor="let item of Booking_Type">{{item.value}}</ng-option>

                        </ng-select> -->
                      </div>
                    </div>
                    <!-- starts---- -->
                    <!-- <ng-container> -->
                    <div class="row mt-3">
                      <div class="col-lg-2">
                        <Span class="number-v">Vehicle Details</Span>
                      </div>
                      <div class="col-lg-10"></div>
                    </div>
                    <!-- Registration Certificate -->
                    <ng-container
                      *ngFor="let item of info_store; let i = index"
                    >
                      <div class="row mt-3">
                        <div class="col-lg-3 d-flex align-items-center">
                          <!-- <i class="fa fa-file me-2" style="font-size: 20px;"></i> -->
                          <img
                            class="me-2"
                            src="{{ name_vehicle[i].img }}"
                            style="height: 3vh"
                          />
                          <!-- <span class="document-v">Registration Certificate (RC)*</span> -->
                          <span class="document-v"
                            >{{ name_vehicle[i].name }} *</span
                          >
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '1'
                            "
                          >
                            <img
                              class="me-2"
                              src="assets/imagesnew/Icon/verified.png"
                              style="height: 3vh; margin-top: 2px"
                            />
                          </ng-container>
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '0'
                            "
                          >
                            <img
                              class="me-2"
                              src="assets/imagesnew/Icon/unsubmit.png"
                              style="height: 3vh; margin-top: 2px"
                            />
                          </ng-container>
                        </div>

                        <div class="col-lg-1 d-flex align-items-center">
                          <!-- <a > -->
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '1'
                            "
                          >
                            <i
                              class="fa-solid fa-arrow-up-from-bracket me-2"
                              style="font-size: 19px; color: #6abd46"
                            ></i>
                            <!-- (click)="vehicle_upload('V',Vehiclefull_information[idx]?.vehicle_data?.vehicle_number,Vehiclefull_information[idx]?.vehicle_data?.id)" -->
                            <!-- </a> -->
                            <span class="Upload-v" style="color: #6abd46"
                              >Upload</span
                            >
                            <span class="straight-v ms-3" style="color: #6abd46"
                              >|</span
                            >
                          </ng-container>
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '0'
                            "
                          >
                            <i
                              class="fa-solid fa-arrow-up-from-bracket me-2"
                              (click)="
                                vehicle_upload(
                                  'V',
                                  Vehiclefull_information[idx]?.vehicle_data
                                    ?.vehicle_number,
                                  Vehiclefull_information[idx]?.vehicle_data
                                    ?.id,
                                  idx,
                                  name_vehicle[i].name
                                )
                              "
                              style="
                                font-size: 19px;
                                color: red;
                                cursor: pointer;
                              "
                            ></i>
                            <!-- </a> -->
                            <a
                              (click)="
                                vehicle_upload(
                                  'V',
                                  Vehiclefull_information[idx]?.vehicle_data
                                    ?.vehicle_number,
                                  Vehiclefull_information[idx]?.vehicle_data
                                    ?.id,
                                  idx,
                                  name_vehicle[i].name
                                )
                              "
                            >
                              <span
                                class="Upload-v"
                                style="color: red; cursor: pointer"
                                >Upload</span
                              ></a
                            >
                            <span class="straight-v ms-3" style="color: red"
                              >|</span
                            >
                          </ng-container>
                        </div>

                        <div class="col-lg-1 d-flex align-items-center">
                          <!-- <a (click)="Driver_edit()"> -->
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '1'
                            "
                          >
                            <i
                              class="fa fa-eye me-2"
                              style="
                                font-size: 19px;
                                color: #6abd46;
                                cursor: pointer;
                              "
                              (click)="
                                view_info(
                                  Vehiclefull_information[idx]?.documents[item],
                                  Vehiclefull_information[idx]?.vehicle_data
                                    ?.vehicle_number,
                                  'V',
                                  Vehiclefull_information[idx]
                                )
                              "
                            ></i>
                            <a
                              (click)="
                                view_info(
                                  Vehiclefull_information[idx]?.documents[item],
                                  Vehiclefull_information[idx]?.vehicle_data
                                    ?.vehicle_number,
                                  'V',
                                  Vehiclefull_information[idx]
                                )
                              "
                            >
                              <span
                                class="Upload-v"
                                style="color: green; cursor: pointer"
                                >View</span
                              >
                            </a>
                            <span class="straight-v ms-3" style="color: #6abd46"
                              >|</span
                            >
                          </ng-container>
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '0'
                            "
                          >
                            <i
                              class="fa fa-eye me-2"
                              style="
                                font-size: 19px;
                                color: red;
                                cursor: pointer;
                              "
                            ></i>
                            <!-- <a (click)="Driver_edit(Vehiclefull_information[idx]?.documents?.RegistrationCertificate, Vehiclefull_information[idx]?.vehicle_data?.vehicle_number,'V')">  -->
                            <span
                              class="Upload-v"
                              style="color: red; cursor: pointer"
                              >View</span
                            >
                            <!-- </a> -->
                            <span class="straight-v ms-3" style="color: red"
                              >|</span
                            >
                          </ng-container>

                          <!-- </a> -->
                          <!-- <span class="straight-v ms-3">|</span> -->
                        </div>

                        <div class="col-lg-1 d-flex align-items-center">
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '1'
                            "
                          >
                            <a
                              (click)="
                                Driver_edit(
                                  Vehiclefull_information[idx]?.documents[item],
                                  Vehiclefull_information[idx]?.vehicle_data
                                    ?.vehicle_number,
                                  'V',
                                  idx,
                                  Vehiclefull_information[idx]?.vehicle_data?.id
                                )
                              "
                            >
                              <i
                                class="fa fa-edit me-2"
                                style="
                                  font-size: 19px;
                                  color: #6abd46;
                                  cursor: pointer;
                                "
                              ></i>
                            </a>
                            <a
                              (click)="
                                Driver_edit(
                                  Vehiclefull_information[idx]?.documents[item],
                                  Vehiclefull_information[idx]?.vehicle_data
                                    ?.vehicle_number,
                                  'V',
                                  idx,
                                  Vehiclefull_information[idx]?.vehicle_data?.id
                                )
                              "
                            >
                              <!-- <i class="fa fa-edit me-2" style="font-size: 19px;    color: #6ABD46; "></i> -->
                              <span
                                class="Upload-v"
                                style="color: #6abd46; cursor: pointer"
                                >Edit</span
                              >
                            </a>
                            <!-- <a (click)="Driver_edit(Vehiclefull_information[idx]?.documents?.RegistrationCertificate, Vehiclefull_information[idx]?.vehicle_data?.vehicle_number)"> -->

                            <!-- </a> -->
                            <!-- <span class="straight-v ms-3">|</span> -->
                            <span class="straight-v ms-3" style="color: #6abd46"
                              >|</span
                            >
                          </ng-container>
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '0'
                            "
                          >
                            <!-- <a (click)="Driver_edit(Vehiclefull_information[idx]?.documents[item], Vehiclefull_information[idx]?.vehicle_data?.vehicle_number,'V',idx)"> -->
                            <i
                              class="fa fa-edit me-2"
                              style="
                                font-size: 19px;
                                color: red;
                                cursor: pointer;
                              "
                            ></i>
                            <!-- </a> -->
                            <!-- <a (click)="Driver_edit(Vehiclefull_information[idx]?.documents[item], Vehiclefull_information[idx]?.vehicle_data?.vehicle_number,'V',idx)"> -->
                            <!-- <i class="fa fa-edit me-2" style="font-size: 19px;    color: red; "></i> -->
                            <span
                              class="Upload-v"
                              style="color: red; cursor: pointer"
                              >Edit</span
                            >
                            <!-- </a> -->
                            <!-- <a (click)="Driver_edit(Vehiclefull_information[idx]?.documents?.RegistrationCertificate, Vehiclefull_information[idx]?.vehicle_data?.vehicle_number)"> -->

                            <!-- </a> -->
                            <span class="straight-v ms-3" style="color: red"
                              >|</span
                            >
                          </ng-container>
                        </div>

                        <div class="col-lg-1 d-flex align-items-center">
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '1'
                            "
                          >
                            <i
                              class="fa fa-trash me-2"
                              style="
                                font-size: 19px;
                                color: #6abd46;
                                cursor: pointer;
                              "
                              (click)="
                                documentChangeStatus(
                                  Vehiclefull_information[idx]?.documents[item]
                                    ?.id
                                )
                              "
                            ></i>
                            <a
                              (click)="
                                documentChangeStatus(
                                  Vehiclefull_information[idx]?.documents[item]
                                    ?.id
                                )
                              "
                            >
                              <span
                                class="Upload-v"
                                style="color: #6abd46; cursor: pointer"
                                >Delete</span
                              >
                            </a>
                            <!-- <span class="straight-v ms-3" >|</span> -->

                            <span class="straight-v ms-3" style="color: #6abd46"
                              >|</span
                            >
                          </ng-container>
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '0'
                            "
                          >
                            <i
                              class="fa fa-trash me-2"
                              style="font-size: 19px; color: red"
                            ></i>
                            <span class="Upload-v" style="color: red"
                              >Delete</span
                            >
                            <!-- <span class="straight-v ms-3" >|</span> -->

                            <span class="straight-v ms-3" style="color: red"
                              >|</span
                            >
                          </ng-container>
                        </div>
                        <div class="col-lg-1 d-flex align-items-center">
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '1'
                            "
                          >
                            <span class="Upload-v" style="color: #6abd46"
                              >Submit</span
                            >
                            <i
                              class="fa-regular fa-circle-check ms-2"
                              style="font-size: 19px; color: #6abd46"
                            ></i>
                          </ng-container>
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '0'
                            "
                          >
                            <span class="Upload-v" style="color: red"
                              >Submit</span
                            >
                            <i
                              class="fa-regular fa-times-circle-o ms-2"
                              style="font-size: 19px; color: red"
                            ></i>
                          </ng-container>
                          <!-- <span class="straight-v ms-3" ><i class="fa-regular fa-circle-check"></i></span> -->
                        </div>
                        <div class="col-lg-1 d-flex align-items-center">
                          <!-- <span class="Upload-v" style="color: green;"> Registration Certicate Uploaded Successfully</span> -->
                        </div>
                        <div class="col-lg-3 d-flex align-items-center">
                          <ng-container
                            *ngIf="
                              Vehiclefull_information[idx]?.documents[item]
                                ?.status == '0'
                            "
                          >
                            <span
                              class="Upload-v"
                              style="color: #6abd46; font-size: 13px"
                            >
                              {{
                                Vehiclefull_information[idx]?.documents[item]
                                  ?.expiryremark
                              }}</span
                            >
                          </ng-container>
                        </div>
                      </div>
                    </ng-container>

                    <!-- Registration Certificate END ----------------------------------------------------------------------------->

                    <!-- Fitness Certicate* END ---------------------------------------------------------------------------------------------------->
                    <!-- -------------------------------------------- Vehicle Safety Features ----------------------------------------------------------------------->
                    <div class="row mt-5">
                      <div class="col-lg-3">
                        <Span class="number-v">Vehicle Safety Features</Span>
                      </div>
                      <div class="col-lg-9"></div>
                    </div>
                    <div class="row mt-3">
                      <ng-container
                        *ngFor="
                          let safty of Vehiclefull_information[idx]
                            ?.vehicle_data?.safety_features;
                          let s = index
                        "
                      >
                        <div
                          class="col-lg-2 d-flex align-items-center"
                          style="width: 10vw"
                        >
                          <!-- <i class="fa fa-map-marker me-2" style="font-size: 20px; color: green;"></i> -->
                          <img
                            class="me-2"
                            src="{{ Safety_list[s].img }}"
                            style="height: 3vh"
                          />
                          <span class="document-v">{{ safty.name }}</span>
                          <input
                            type="checkbox"
                            class="ms-2"
                            [checked]="safty.value"
                            formArrayName="safetyFeatures"
                            [formControlName]="s"
                            (change)="toggleSafetyFeature(idx, s)"
                          />
                        </div>
                      </ng-container>

                      <!-- <ng-container *ngFor="let safty of Vehiclefull_information[idx]?.vehicle_data?.safety_features; let s=index">
                      <div class="row mt-3">
                        <div class="col-lg-2 d-flex align-items-center">
                          <img class="me-2" src="{{ Safety_list[s].img }}" style="height: 3vh;">
                          <span class="document-v">{{ safty.name }}</span>
                          <input type="checkbox" class="ms-2" [checked]="safty.value" formArrayName="safetyFeatures" [formControlName]="s">
                        </div>
                      </div>
                    </ng-container> -->

                      <!-- <div class="col-lg-2 d-flex align-items-center" style="    width: 8vw;">
                        <i class="fa fa-map-marker me-2" style="font-size: 20px;"></i>
                        <span class="document-v">E-Lock</span>
                        <input type="checkbox" class="ms-2">
                      </div>
                      <div class="col-lg-2 d-flex align-items-center" style="    width: 10vw;">
                        <i class="fa fa-map-marker me-2" style="font-size: 20px;"></i>
                        <span class="document-v">Fire Safety</span>
                        <input type="checkbox" class="ms-2">
                      </div>
                      <div class="col-lg-2 d-flex align-items-center">
                        <i class="fa fa-map-marker me-2" style="font-size: 20px;"></i>
                        <span class="document-v">Dual Driver</span>
                        <input type="checkbox" class="ms-2">
                      </div> -->
                    </div>
                    <!----------------------------------------------- Vehicle Safety Features---------------------------------------------------------------------------------------- -->
                    <!-- Driver------------------------------------ -->
                    <ng-container>
                      <div class="row">
                        <div class="col-lg-9">
                          <div class="row mt-3">
                            <div class="col-lg-2">
                              <Span class="number-v">Driver Details</Span>
                            </div>
                            <div class="col-lg-8"></div>
                            <div class="col-lg-2">
                              <!-- <img src=""> -->
                            </div>
                          </div>
                          <div class="row mt-2">
                            <div class="col-lg-6">
                              <span class="filtor_name">Driver's Name</span>
                              <ng-select
                                name="Bookingtype"
                                formControlName="Driver"
                                [ngClass]="{
                                  'input-error': isCheckboxInvalid(
                                    idx,
                                    'Driver'
                                  )
                                }"
                                style="font-size: 14px; font-weight: 400"
                                [closeOnSelect]="true"
                                (change)="get_driver($event.id, idx)"
                              >
                                <ng-option value="" selected>Select</ng-option>
                                <!-- <ng-option value="1">UP45621</ng-option>
                            <ng-option value="2">UP87878</ng-option> -->
                                <ng-option
                                  [value]="item"
                                  *ngFor="let item of Driver_list"
                                  >{{ item.name }}</ng-option
                                >
                              </ng-select>
                            </div>
                            <div class="col-lg-6">
                              <span class="filtor_name">Phone Number</span>
                              <input
                                type="text"
                                step="1"
                                class="form-control"
                                placeholder="Vehicle Capacity"
                                required
                                formControlName="Phone"
                                [value]="
                                  driverfull_information[idx]?.driver_data
                                    ?.mob_no
                                "
                                [ngClass]="{
                                  'input-error': isCheckboxInvalid(idx, 'Phone')
                                }"
                              />
                            </div>
                            <!-- <div class="col-lg-4">
                          <span class="filtor_name"> Driver's Photograph</span> -->
                            <!-- <input type="file" step="1" class="form-control" placeholder="Vehicle Capacity" required
                          formControlName="Capacity" /> -->
                            <!-- <input type="text" class="form-control" placeholder="Vehicle Capacity" readonly /> -->
                            <!-- <input type="file" id="file" class="file-input form-control " required formControlName="Photograph"  style="display: block !important;"(click)="vehicle_upload('D',driverfull_information[idx]?.driver_data?.name,driverfull_information[idx]?.driver_data?.id,idx)" /> -->
                            <!-- <label for="file" class="file-icon"> upload Photograph<i class="fas fa-file-upload"></i></label> -->
                            <!-- </div> -->
                          </div>
                        </div>
                        <div
                          class="col-lg-3"
                          style="text-align: center; padding-bottom: 0px"
                        >
                          <!-- <i class="fas fa-user-circle" style="font-size: 50px"></i> -->
                          <div
                            class="driver-img"
                            style="width: 6vw; margin-top: 4vh; height: 9vh"
                          >
                            <img
                              [src]="
                                driverfull_information[idx]?.documents
                                  .Photograph?.file_path
                              "
                              style="width: 6vw; height: 11vh"
                            />
                          </div>
                        </div>
                      </div>

                      <ng-container
                        *ngFor="let item of info_store_driver; let i = index"
                      >
                        <div class="row mt-3">
                          <div class="col-lg-3 d-flex align-items-center">
                            <!-- <i class="fa fa-file me-2" style="font-size: 20px;"></i> -->
                            <img
                              class="me-2"
                              src="{{ Driver_documentList[i]?.img }}"
                              style="height: 3vh"
                            />
                            <!-- <span class="document-v">Registration Certificate (RC)*</span> -->
                            <span class="document-v"
                              >{{ Driver_documentList[i]?.name }} *</span
                            >
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '1'
                              "
                            >
                              <img
                                class="me-2"
                                src="assets/imagesnew/Icon/verified.png"
                                style="height: 3vh; margin-top: 2px"
                              />
                            </ng-container>
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '0'
                              "
                            >
                              <img
                                class="me-2"
                                src="assets/imagesnew/Icon/unsubmit.png"
                                style="height: 3vh; margin-top: 2px"
                              />
                            </ng-container>
                          </div>

                          <div class="col-lg-1 d-flex align-items-center">
                            <!-- <a > -->
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == 1
                              "
                            >
                              <i
                                class="fa-solid fa-arrow-up-from-bracket me-2"
                                style="font-size: 19px; color: #6abd46"
                              ></i>
                              <!-- (click)="vehicle_upload('V',driverfull_information[idx]?.vehicle_data?.name,driverfull_information[idx]?.vehicle_data?.id)" -->
                              <!-- </a> -->
                              <span
                                class="Upload-v"
                                style="color: #6abd46"
                                formControlName="Capacity"
                                >Upload</span
                              >
                              <span
                                class="straight-v ms-3"
                                style="color: #6abd46"
                                >|</span
                              >
                            </ng-container>
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '0'
                              "
                            >
                              <i
                                class="fa-solid fa-arrow-up-from-bracket me-2"
                                (click)="
                                  vehicle_upload(
                                    'D',
                                    driverfull_information[idx]?.driver_data
                                      ?.name,
                                    driverfull_information[idx]?.driver_data
                                      ?.id,
                                    idx,
                                    Driver_documentList[i]?.name
                                  )
                                "
                                style="
                                  font-size: 19px;
                                  color: red;
                                  cursor: pointer;
                                "
                              ></i>
                              <!-- </a> -->
                              <a
                                (click)="
                                  vehicle_upload(
                                    'D',
                                    driverfull_information[idx]?.driver_data
                                      ?.name,
                                    driverfull_information[idx]?.driver_data
                                      ?.id,
                                    idx,
                                    driverfull_information[idx]?.documents[item]
                                  )
                                "
                              >
                                <span
                                  class="Upload-v"
                                  style="color: red; cursor: pointer"
                                  >Upload</span
                                ></a
                              >
                              <span class="straight-v ms-3" style="color: red"
                                >|</span
                              >
                            </ng-container>
                          </div>

                          <div class="col-lg-1 d-flex align-items-center">
                            <!-- <a (click)="Driver_edit()"> -->
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '1'
                              "
                            >
                              <i
                                class="fa fa-eye me-2"
                                style="
                                  font-size: 19px;
                                  color: #6abd46;
                                  cursor: pointer;
                                "
                                (click)="
                                  view_info(
                                    driverfull_information[idx]?.documents[
                                      item
                                    ],
                                    driverfull_information[idx]?.driver_data
                                      ?.name,
                                    'D',
                                    driverfull_information[idx]
                                  )
                                "
                              ></i>
                              <a
                                (click)="
                                  view_info(
                                    driverfull_information[idx]?.documents[
                                      item
                                    ],
                                    driverfull_information[idx]?.driver_data
                                      ?.name,
                                    'D',
                                    driverfull_information[idx]
                                  )
                                "
                              >
                                <span
                                  class="Upload-v"
                                  style="color: #6abd46; cursor: pointer"
                                  >View</span
                                >
                              </a>
                              <span
                                class="straight-v ms-3"
                                style="color: #6abd46"
                                >|</span
                              >
                            </ng-container>
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '0'
                              "
                            >
                              <i
                                class="fa fa-eye me-2"
                                style="
                                  font-size: 19px;
                                  color: red;
                                  cursor: pointer;
                                "
                              ></i>
                              <!-- <a (click)="Driver_edit(driverfull_information[idx]?.documents?.RegistrationCertificate, driverfull_information[idx]?.vehicle_data?.name,'V')">  -->
                              <span
                                class="Upload-v"
                                style="color: red; cursor: pointer"
                                >View</span
                              >
                              <!-- </a> -->
                              <span class="straight-v ms-3" style="color: red"
                                >|</span
                              >
                            </ng-container>

                            <!-- </a> -->
                            <!-- <span class="straight-v ms-3">|</span> -->
                          </div>

                          <div class="col-lg-1 d-flex align-items-center">
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '1'
                              "
                            >
                              <a
                                (click)="
                                  Driver_edit(
                                    driverfull_information[idx]?.documents[
                                      item
                                    ],
                                    driverfull_information[idx]?.driver_data
                                      ?.name,
                                    'D',
                                    idx,
                                    driverfull_information[idx]?.driver_data
                                      ?.name
                                  )
                                "
                              >
                                <i
                                  class="fa fa-edit me-2"
                                  style="
                                    font-size: 19px;
                                    color: #6abd46;
                                    cursor: pointer;
                                  "
                                ></i>
                              </a>
                              <a
                                (click)="
                                  Driver_edit(
                                    driverfull_information[idx]?.documents[
                                      item
                                    ],
                                    driverfull_information[idx]?.driver_data
                                      ?.name,
                                    'D',
                                    idx,
                                    driverfull_information[idx]?.driver_data
                                      ?.name
                                  )
                                "
                              >
                                <!-- <i class="fa fa-edit me-2" style="font-size: 19px;    color: #6ABD46; "></i> -->
                                <span
                                  class="Upload-v"
                                  style="color: #6abd46; cursor: pointer"
                                  >Edit</span
                                >
                              </a>
                              <!-- <a (click)="Driver_edit(driverfull_information[idx]?.documents?.RegistrationCertificate, driverfull_information[idx]?.driver_data?.name)"> -->

                              <!-- </a> -->
                              <!-- <span class="straight-v ms-3">|</span> -->
                              <span
                                class="straight-v ms-3"
                                style="color: #6abd46"
                                >|</span
                              >
                            </ng-container>
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '0'
                              "
                            >
                              <!-- <a (click)="Driver_edit(driverfull_information[idx]?.documents[item], driverfull_information[idx]?.driver_data?.name,'D',idx, driverfull_information[idx]?.driver_data?.id)"> -->
                              <i
                                class="fa fa-edit me-2"
                                style="
                                  font-size: 19px;
                                  color: red;
                                  cursor: pointer;
                                "
                              ></i>
                              <!-- </a> -->
                              <!-- <a (click)="Driver_edit(driverfull_information[idx]?.documents[item], driverfull_information[idx]?.driver_data?.name,'D',idx, driverfull_information[idx]?.driver_data?.id)"> -->
                              <!-- <i class="fa fa-edit me-2" style="font-size: 19px;    color: red; "></i> -->
                              <span
                                class="Upload-v"
                                style="color: red; cursor: pointer"
                                >Edit</span
                              >
                              <!-- </a> -->
                              <!-- <a (click)="Driver_edit(driverfull_information[idx]?.documents?.RegistrationCertificate, driverfull_information[idx]?.vehicle_data?.name)"> -->

                              <!-- </a> -->
                              <span class="straight-v ms-3" style="color: red"
                                >|</span
                              >
                            </ng-container>
                          </div>

                          <div class="col-lg-1 d-flex align-items-center">
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '1'
                              "
                            >
                              <i
                                class="fa fa-trash me-2"
                                style="
                                  font-size: 19px;
                                  color: #6abd46;
                                  cursor: pointer;
                                "
                                (click)="
                                  documentChangeStatus(
                                    driverfull_information[idx]?.documents[item]
                                      ?.id
                                  )
                                "
                              ></i>
                              <a
                                (click)="
                                  documentChangeStatus(
                                    driverfull_information[idx]?.documents[item]
                                      ?.id
                                  )
                                "
                              >
                                <span
                                  class="Upload-v"
                                  style="color: #6abd46; cursor: pointer"
                                  >Delete</span
                                >
                              </a>
                              <!-- <span class="straight-v ms-3" >|</span> -->

                              <span
                                class="straight-v ms-3"
                                style="color: #6abd46"
                                >|</span
                              >
                            </ng-container>
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '0'
                              "
                            >
                              <i
                                class="fa fa-trash me-2"
                                style="font-size: 19px; color: red"
                              ></i>
                              <span class="Upload-v" style="color: red"
                                >Delete</span
                              >
                              <!-- <span class="straight-v ms-3" >|</span> -->

                              <span class="straight-v ms-3" style="color: red"
                                >|</span
                              >
                            </ng-container>
                          </div>
                          <div class="col-lg-1 d-flex align-items-center">
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '1'
                              "
                            >
                              <span class="Upload-v" style="color: #6abd46"
                                >Submit</span
                              >
                              <i
                                class="fa-regular fa-circle-check ms-2"
                                style="font-size: 19px; color: #6abd46"
                              ></i>
                            </ng-container>
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '0'
                              "
                            >
                              <span class="Upload-v" style="color: red"
                                >Submit</span
                              >
                              <i
                                class="fa-regular fa-times-circle-o ms-2"
                                style="font-size: 19px; color: red"
                              ></i>
                            </ng-container>
                            <!-- <span class="straight-v ms-3" ><i class="fa-regular fa-circle-check"></i></span> -->
                          </div>
                          <div class="col-lg-1 d-flex align-items-center">
                            <!-- <span class="Upload-v" style="color: green;"> Registration Certicate Uploaded Successfully</span> -->
                          </div>
                          <div class="col-lg-3 d-flex align-items-center">
                            <ng-container
                              *ngIf="
                                driverfull_information[idx]?.documents[item]
                                  ?.status == '0'
                              "
                            >
                              <span
                                class="Upload-v"
                                style="color: #6abd46; font-size: 13px"
                              >
                                {{
                                  driverfull_information[idx]?.documents[item]
                                    ?.expiryremark
                                }}</span
                              >
                            </ng-container>
                          </div>
                        </div>
                      </ng-container>
                    </ng-container>
                    <div class="row mt-3">
                      <div class="col-lg-2">
                        <Span class="number-v">Remark</Span>
                      </div>
                      <div class="col-lg-8"></div>
                      <div class="col-lg-2">
                        <!-- <img src=""> -->
                      </div>
                    </div>
                    <div class="row mt-3">
                      <div class="col-lg-3">
                        <input
                          type="text"
                          class="form-control"
                          formControlName="remark"
                        />
                      </div>
                      <div class="col-lg-9"></div>
                    </div>

                    <div class="row mt-3">
                      <div class="col-lg-2">
                        <Span class="number-v">Declaimer*</Span>
                      </div>
                      <div class="col-lg-8"></div>
                      <div class="col-lg-2">
                        <!-- <img src=""> -->
                      </div>
                    </div>
                    <div class="row mt-3">
                      <div class="col-lg-12 d-flex">
                        <input
                          type="checkbox"
                          class="me-2"
                          formControlName="checkbox"
                          [ngClass]="{
                            'input-error': isCheckboxInvalid(idx, 'checkbox')
                          }"
                        />
                        <div
                          *ngIf="isCheckboxInvalid(idx, 'checkbox')"
                          class="help-block"
                          style="color: red"
                        >
                          Checkbox is required.
                        </div>
                        <p style="margin-bottom: 0px">
                          I hereby declare that all the information given above
                          is true and correct to the best of my knowledge.
                        </p>
                      </div>
                    </div>

                    <div class="row mt-3">
                      <div _ngcontent-tee-c230="" class="col-lg-12 d-flex">
                        <!-- patchSafetyFeatures(idx); -->
                        <button
                          class="btn btn-success"
                          (click)="patchSafetyFeatures(idx)"
                          [disabled]="!isCheckboxSelected(idx)"
                        >
                          Assign Vehicle
                        </button>
                      </div>
                    </div>
                    <!-- </div> -->
                    <!-- <input type="text" formControlName="Vehicle">
                   <button type="submit">submit</button> -->
                  </ng-template>
                </ngb-panel>
              </ng-container>
            </ngb-accordion>
          </div>
        </div>
        <!-- <div class="modal-footer"> [ngClass]="{ 'input-error': isCheckboxInvalid(i,'Quote') }"-->
        <div class="row">
          <div class="col-lg-3">
            <ng-container *ngIf="OneRow_Data?.Status == '5'">
              <span
                class="filtor_name"
                style="margin-left: 54px; font-size: 24px; font-size: 17px"
                >Quote Amount</span
              >
              <input
                type="number"
                class="form-control"
                placeholder=" Quote Amount"
                required
                formControlName="Quote"
                style="
                  background-color: white;
                  width: 11vw;
                  font-size: 14px;
                  text-align: center;
                  margin-left: 10%;
                "
              />
            </ng-container>
          </div>

          <div class="col-lg-9">
            <button
              class="btn mt-2"
              (click)="Assign_vehicle_Addsubmit()"
              style="
                margin-left: 23%;
                width: 11vw;
                background: #6abd46;
                color: white;
              "
              [disabled]="isSubmitDisabled()"
            >
              Submit
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- END  ORDER MODAL OF ASSIGN VEHICLE -->
<!-- modal -->
<div
  class="modal fade"
  id="upload"
  tabindex="-1"
  role="dialog"
  aria-labelledby="uploadModalLabel"
  aria-hidden="true"
  aria-hidden="false"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
>
  <form
    #Driverupload="ngForm"
    (ngSubmit)="uploaddriver_submit(Driverupload, 2)"
  >
    <div class="modal-dialog modal-custom" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="uploadModalLabel">Add New Document</h5>
          <button
            type="button"
            class="close"
            data-bs-dismiss="modal"
            aria-label="Close"
            (click)="Driverupload.resetForm()"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <!-- (ngSubmit)="uploaddriver_submit(Driverupload)" -->

        <div class="modal-body">
          <div class="row mt-3">
            <div class="col-lg-12">
              <ng-container *ngIf="select == 'D'">
                <span class="filtor_name">Driver's Name</span>
              </ng-container>
              <ng-container *ngIf="select == 'V'">
                <span class="filtor_name">Vehicle Number</span>
              </ng-container>
              <input
                type="text"
                autocomplete="off"
                class="form-control"
                style="background: white"
                [value]="Driver_name"
                disabled
              />

              <!-- <ng-select 
                name="Driver" 
                ngModel 
                #Driver="ngModel"
                required
                style="font-size: 14px; font-weight: 400;" 
                [closeOnSelect]="true"
                [ngClass]="{'is-invalid': (Driver.invalid && (Driver.touched || Driverupload.submitted)) || (!Driver.touched && Driverupload.submitted)}"
              >
                <ng-option value="" selected>Select</ng-option>
                <ng-option  *ngFor="let item of Driver_list" value="{{item.id}}">{{item.name}}</ng-option>
             
              </ng-select> -->
              <!-- <div *ngIf="(Driver.invalid && (Driver.touched || Driverupload.submitted)) || (!Driver.touched && Driverupload.submitted)" class="invalid-feedback">
                Please select a vehicle.
              </div> -->
            </div>
          </div>

          <div class="row mt-3">
            <div class="col">
              <span class="filtor_name">Document Type</span>
              <ng-container *ngIf="select == 'D'">
                <ng-select
                  name="Documenttype_1"
                  [(ngModel)]="Document_name"
                  #Documenttype="ngModel"
                  (ngModelChange)="onDocumentTypeChange($event)"
                  style="font-size: 14px; font-weight: 400"
                  [closeOnSelect]="true"
                  disabled
                >
                  <ng-option value="" selected>Select</ng-option>
                  <ng-option
                    *ngFor="let item of documentMasters_list?.driver"
                    [value]="item"
                    >{{ item.name }}</ng-option
                  >
                  <div
                    *ngIf="
                      (Documenttype.invalid &&
                        (Documenttype.touched || Driverupload.submitted)) ||
                      (!Documenttype.touched && Driverupload.submitted)
                    "
                    class="invalid-feedback"
                  >
                    Please select a document type.
                  </div>
                </ng-select>
              </ng-container>
              <ng-container *ngIf="select == 'V'">
                <ng-select
                  name="Documenttype_1"
                  [(ngModel)]="Document_name"
                  #Documenttype="ngModel"
                  disabled
                  (ngModelChange)="onDocumentTypeChange($event)"
                  style="font-size: 14px; font-weight: 400"
                  [closeOnSelect]="true"
                >
                  <ng-option value="" selected>Select</ng-option>
                  <ng-option
                    *ngFor="let item of documentMasters_list?.vehicle"
                    [value]="item"
                    >{{ item.name }}</ng-option
                  >
                </ng-select>

                <div
                  *ngIf="
                    (Documenttype.invalid &&
                      (Documenttype.touched || Driverupload.submitted)) ||
                    (!Documenttype.touched && Driverupload.submitted)
                  "
                  class="invalid-feedback"
                >
                  Please select a document type.
                </div>
              </ng-container>
              <!-- <span class="filtor_name">Document Type</span>
              
              <input type="text" autocomplete="off" class="form-control"  style="    background: white;"
       [value]="Document_name" disabled> -->
            </div>

            <div class="col" *ngIf="document_for !== 'Photograph'">
              <span class="filtor_name">Document Number</span>
              <input
                type="number"
                step="1"
                autocomplete="off"
                class="form-control"
                placeholder="Document Number"
                required
                name="documentNumber_1"
                ngModel
                #documentNumber="ngModel"
                [ngClass]="{
                  'is-invalid':
                    documentNumber.invalid &&
                    (documentNumber.touched || Driverupload.submitted)
                }"
              />
              <div
                *ngIf="
                  documentNumber.invalid &&
                  (documentNumber.touched || Driverupload.submitted)
                "
                class="invalid-feedback"
              >
                Document number is required.
              </div>
            </div>
          </div>

          <div class="row mt-3" *ngIf="document_for !== 'Photograph'">
            <div class="col">
              <span class="filtor_name">Issue Date</span>
              <div class="input-group date" id="datepicker">
                <input
                  type="date"
                  id="Date-Issue"
                  class="form-control"
                  autocomplete="off"
                  required
                  name="from_Date_1"
                  ngModel
                  #fromDate="ngModel"
                  [ngClass]="{
                    'is-invalid':
                      fromDate.invalid &&
                      (fromDate.touched || Driverupload.submitted)
                  }"
                />
                <!-- <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fa fa-calendar" style="color: black !important;"></i>
                  </span>
                </div> -->
              </div>
              <div
                *ngIf="fromDate.invalid && Issue_status"
                class="invalid-feedback"
              >
                Issue date is required.
              </div>
            </div>

            <div
              class="col"
              *ngIf="
                document_for !== 'Aadhaar Card' && document_for !== 'Pan Card'
              "
            >
              <span class="filtor_name">Expiry Date</span>
              <div class="input-group date" id="datepicker">
                <!--  (click)="Expiry()" -->
                <input
                  type="date"
                  id="Date-Expiry"
                  class="form-control"
                  autocomplete="off"
                  required
                  name="To_Date_1"
                  ngModel
                  #toDate="ngModel"
                  [ngClass]="{
                    'is-invalid':
                      toDate.invalid &&
                      (toDate.touched || Driverupload.submitted)
                  }"
                />
                <!-- <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fa fa-calendar" style="color: black !important;"></i>
                  </span>
                </div> -->
              </div>
              <div
                *ngIf="
                  toDate.invalid && (toDate.touched || Driverupload.submitted)
                "
                class="invalid-feedback"
              >
                Expiry date is required.
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-6">
              <span class="filtor_name">Upload Document</span>
              <input
                type="file"
                class="form-control"
                ngModel
                (change)="onFileChange_doc($event)"
                required
                name="uploadDocument_1"
                #uploadDocument="ngModel"
                [ngClass]="{
                  'is-invalid':
                    uploadDocument.invalid &&
                    (uploadDocument.touched || Driverupload.submitted)
                }"
              />
              <div
                *ngIf="
                  uploadDocument.invalid &&
                  (uploadDocument.touched || Driverupload.submitted)
                "
                class="invalid-feedback"
              >
                Please upload a document.
              </div>
            </div>

            <div class="col-lg-6">
              <span class="filtor_name">Remark</span>
              <input
                type="text"
                autocomplete="off"
                class="form-control"
                ngModel
                placeholder="Remark"
                name="remark"
                #remark="ngModel"
                [ngClass]="{
                  'is-invalid':
                    remark.invalid && (remark.touched || Driverupload.submitted)
                }"
              />
              <div
                *ngIf="
                  remark.invalid && (remark.touched || Driverupload.submitted)
                "
                class="invalid-feedback"
              >
                Remark is required.
              </div>
            </div>
          </div>
        </div>

        <div
          class="container-fluid"
          style="
            text-align: center;
            height: 8vh;
            border-top: 1px solid #80808036;
          "
        >
          <button
            type="submit"
            style="margin-top: 8px; color: white; background: #1d4380"
            class="btn"
            data-dismiss="modal"
          >
            Update
          </button>
        </div>
        <!-- </form> -->
      </div>
    </div>
  </form>
</div>

<!-- Driver Edit #upload-View -->

<div
  class="modal fade"
  id="upload-edit"
  tabindex="-1"
  role="dialog"
  aria-labelledby="uploadModalLabel"
  aria-hidden="true"
  aria-hidden="false"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
>
  <div class="modal-dialog modal-custom" role="document">
    <form #Driverupload1="ngForm" (ngSubmit)="updatesubmit(Driverupload1, 2)">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="uploadModalLabel">Update Document</h5>
          <!-- (click)="Driverupload1.resetForm()" -->
          <button
            type="button"
            class="close"
            data-bs-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <!-- (ngSubmit)="uploaddriver_submit(Driverupload)" -->

        <div class="modal-body">
          <div class="row mt-3">
            <div class="col-lg-12">
              <ng-container *ngIf="select == 'D'">
                <span class="filtor_name">Driver's Name</span>
              </ng-container>
              <ng-container *ngIf="select == 'V'">
                <span class="filtor_name">Vehicle Number</span>
              </ng-container>
              <input
                type="text"
                autocomplete="off"
                class="form-control"
                style="background: white"
                [value]="Driver_name"
                disabled
              />

              <!-- <ng-select 
                name="Driver" 
                ngModel 
                #Driver="ngModel"
                required
                style="font-size: 14px; font-weight: 400;" 
                [closeOnSelect]="true"
                [ngClass]="{'is-invalid': (Driver.invalid && (Driver.touched || Driverupload.submitted)) || (!Driver.touched && Driverupload.submitted)}"
              >
                <ng-option value="" selected>Select</ng-option>
                <ng-option  *ngFor="let item of Driver_list" value="{{item.id}}">{{item.name}}</ng-option>
             
              </ng-select> -->
              <!-- <div *ngIf="(Driver.invalid && (Driver.touched || Driverupload.submitted)) || (!Driver.touched && Driverupload.submitted)" class="invalid-feedback">
                Please select a vehicle.
              </div> -->
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-6">
              <span class="filtor_name">Document Type</span>

              <input
                type="text"
                autocomplete="off"
                class="form-control"
                style="background: white"
                [value]="Document_name"
                disabled
              />
              <!-- <div *ngIf="(Documenttype.invalid && (Documenttype.touched || Driverupload.submitted)) || (!Documenttype.touched && Driverupload.submitted)" class="invalid-feedback">
                Please select a document type.
              </div> -->
            </div>

            <div class="col-lg-6">
              <span class="filtor_name">Document Number</span>
              <!-- <input type="text" step="1"autocomplete="off" class="form-control" placeholder="Document Number" required name="documentNumber"
              [ngModel]="edit_data?.doc_no"    #documentNumber="ngModel" [ngClass]="{'is-invalid': (documentNumber.invalid && (documentNumber.touched || Driverupload1.submitted))}"
              > -->
              <input
                type="text"
                step="1"
                autocomplete="off"
                class="form-control"
                placeholder="Document Number"
                required
                name="documentNumber"
                [ngModel]="edit_data?.doc_no || ''"
                #documentNumber1="ngModel"
                [ngClass]="{
                  'is-invalid':
                    documentNumber1.invalid &&
                    (documentNumber1.touched || Driverupload1.submitted)
                }"
              />
              <div
                *ngIf="
                  documentNumber1.invalid &&
                  (documentNumber1.touched || Driverupload1.submitted)
                "
                class="invalid-feedback"
              >
                Document number is required.
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-6">
              <span class="filtor_name">Issue Date</span>
              <div class="input-group date" id="datepicker">
                <input
                  type="date"
                  id="Date-Issue"
                  class="form-control"
                  autocomplete="off"
                  [ngModel]="edit_data?.issue_date"
                  required
                  name="from_Date"
                  #fromDate1="ngModel"
                  [ngClass]="{
                    'is-invalid':
                      fromDate1.invalid &&
                      (fromDate1.touched || Driverupload1.submitted)
                  }"
                />
                <!-- <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fa fa-calendar" style="color: black !important;"></i>
                  </span>
                </div> -->
              </div>
              <div
                *ngIf="fromDate1.invalid && Issue_status"
                class="invalid-feedback"
              >
                Issue date is required.
              </div>
            </div>

            <div class="col-lg-6">
              <span class="filtor_name">Expiry Date</span>
              <div class="input-group date" id="datepicker">
                <!--  (click)="Expiry()" -->
                <input
                  type="date"
                  id="Date-Expiry"
                  class="form-control"
                  autocomplete="off"
                  [ngModel]="edit_data?.expiry_date"
                  required
                  name="To_Date"
                  #toDate1="ngModel"
                  [ngClass]="{
                    'is-invalid':
                      toDate1.invalid &&
                      (toDate1.touched || Driverupload1.submitted)
                  }"
                />
                <!-- <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fa fa-calendar" style="color: black !important;"></i>
                  </span>
                </div> -->
              </div>
              <div
                *ngIf="
                  toDate1.invalid &&
                  (toDate1.touched || Driverupload1.submitted)
                "
                class="invalid-feedback"
              >
                Expiry date is required.
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-6">
              <!-- ="edit_data?.file_path"  -->
              <!-- <span class="filtor_name">Upload Document <a href="{{edit_data?.file_path}}">View</a></span> -->
              <span class="filtor_name">
                Upload Document
                <a style="cursor: pointer" (click)="toggleIframe()"
                  >View</a
                ></span
              >

              <input
                type="file"
                class="form-control"
                ngModel
                (change)="onFileChange_doc_edit($event)"
                name="uploadDocument"
                #uploadDocument1="ngModel"
                [value]="edit_data?.file_path"
              />
              <!--[ngClass]="{'is-invalid': (uploadDocument1.invalid && (uploadDocument1.touched || Driverupload1.submitted))}"
              <div *ngIf="(uploadDocument1.invalid && (uploadDocument1.touched || Driverupload1.submitted))" class="invalid-feedback">
                Please upload a document.
              </div> -->
            </div>

            <div class="col-lg-6">
              <span class="filtor_name">Remark</span>
              <input
                type="text"
                autocomplete="off"
                class="form-control"
                ngModel
                placeholder="Remark"
                name="remark"
                #remark="ngModel"
              />
              <!-- <div *ngIf="(remark.invalid && (remark.touched || Driverupload1.submitted))" class="invalid-feedback">
                Remark is required.
              </div> -->
            </div>
            <div class="col-lg-6">
              <div class="imagePreview">
                <div class="image-container" *ngIf="imageURL_edit">
                  <img [src]="imageURL_edit" alt="Image Preview" />
                  <!-- (click)="removeImage()" -->
                  <button (click)="removeImage()">
                    <i
                      class="fa fa-close"
                      style="font-size: 24px; color: red"
                    ></i>
                  </button>
                </div>
                <div *ngIf="showIframe" class="iframe-container">
                  <img [src]="edit_data.file_path" width="100%" />
                </div>
              </div>
            </div>
          </div>

          <div
            class="container-fluid"
            style="
              text-align: center;
              height: 8vh;
              border-top: 1px solid #80808036;
            "
          >
            <button
              type="submit"
              style="margin-top: 8px; color: white; background: #1d4380"
              class="btn"
              data-dismiss="modal"
            >
              Update
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<!-- VIEW VIEW VIEW   ------------------------------------------------------- -->
<div
  class="modal fade"
  id="upload-View"
  tabindex="-1"
  role="dialog"
  aria-labelledby="uploadModalLabel"
  aria-hidden="true"
  aria-hidden="false"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
>
  <div class="modal-dialog modal-custom" role="document">
    <form #Driverupload1="ngForm" (ngSubmit)="updatesubmit(Driverupload1, 2)">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="uploadModalLabel">View Document</h5>
          <!-- (click)="Driverupload1.resetForm()" -->
          <button
            type="button"
            class="close"
            data-bs-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <!-- (ngSubmit)="uploaddriver_submit(Driverupload)" -->

        <div class="modal-body">
          <div class="row">
            <div class="col-lg-12 d-flex align-items-center">
              <!-- <i class="fa fa-file me-2" style="font-size: 20px;"></i> -->

              <!-- <span class="document-v">{{Driver_name}}</span> -->
              <ng-container *ngIf="select == 'D'">
                <div class="">
                  <img
                    class="me-2"
                    [src]="full_view?.documents.Photograph?.file_path"
                    style="width: 5vw; height: 9vh"
                  />
                </div>
                <!-- <span class="filtor_name">Driver's Name</span> -->
              </ng-container>
              <ng-container *ngIf="select == 'V'">
                <!-- <span class="filtor_name">Vehicle Number</span> -->
                <div class="">
                  <img
                    class="me-2"
                    src="assets/imagesnew/Icon/truck.jpg"
                    style="width: 5vw; height: 9vh"
                  />
                </div>
              </ng-container>
              <div class="show-name">{{ Driver_name }}</div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-4">
              <span class="heading-name">Document Type</span>
            </div>
            <div class="col-lg-6">
              <span class="filtor_name">{{ Document_name }}</span>
            </div>
            <!-- <div *ngIf="(Documenttype.invalid && (Documenttype.touched || Driverupload.submitted)) || (!Documenttype.touched && Driverupload.submitted)" class="invalid-feedback">
                Please select a document type.
              </div> -->
          </div>
          <div class="row mt-3">
            <div class="col-lg-4">
              <span class="heading-name">Document Number</span>
            </div>
            <div class="col-lg-6">
              <span class="filtor_name">{{ edit_data?.doc_no }}</span>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-4">
              <span class="heading-name">Issue Date</span>
            </div>
            <div class="col-lg-6">
              <span class="filtor_name">{{ edit_data?.issue_date }}</span>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-lg-4">
              <span class="heading-name">Expiry Date</span>
            </div>
            <div class="col-lg-6">
              <span class="filtor_name"> {{ edit_data?.expiry_date }}</span>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-lg-4">
              <!-- ="edit_data?.file_path"  -->
              <!-- <span class="filtor_name">Upload Document <a href="{{edit_data?.file_path}}">View</a></span> -->
              <span class="heading-name"> Document File </span>

              <!--[ngClass]="{'is-invalid': (uploadDocument1.invalid && (uploadDocument1.touched || Driverupload1.submitted))}"
              <div *ngIf="(uploadDocument1.invalid && (uploadDocument1.touched || Driverupload1.submitted))" class="invalid-feedback">
                Please upload a document.
              </div> -->
            </div>

            <div class="col-lg-6">
              <a
                style="cursor: pointer"
                class="filtor_name"
                (click)="toggleIframe()"
                >View</a
              >
              <div class="imagePreview">
                <div class="image-container" *ngIf="imageURL_edit">
                  <img [src]="imageURL_edit" alt="Image Preview" />
                  <!-- (click)="removeImage()" -->
                  <button (click)="removeImage()">
                    <i
                      class="fa fa-close"
                      style="font-size: 24px; color: red"
                    ></i>
                  </button>
                </div>
                <div *ngIf="showIframe" class="iframe-container">
                  <img [src]="edit_data.file_path" width="100%" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
<!-- ////////////////////////////////////////////////////////////////////////// -->
