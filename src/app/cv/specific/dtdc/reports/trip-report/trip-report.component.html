<div class="row">
  <div class="col-lg-12">
  
    <div class="card" style="height: 80px;    margin-bottom: 0px;">
      <div class="card-body innerdiv">
        <!-- HEADER -->
        <div class="hor-header">
          <div class="">
            <div>
              <div>


                <div>
                  <!-- Network Delay Dashboardn justify-content-between -->
                  <div aria-label="Basic example" id="header-button">
                      <div class="d-flex ">
                        <div class="col-lg-1" style="color: #1c84c6;font-weight: 600;font-size: large; width: auto;">
                          <div class=" align-items-left ">
                              <div style="width:fit-content" class=" my-2 d-flex">
                                <button class="app-sidebar__toggle ms-1 " (click)="sidebarToggle()" type="button"></button>
                              </div>
                              </div>
                        </div>
                        <div class="col-lg-4" style="color: #1c84c6;font-weight: 600;font-size: large;">
                          <div class=" align-items-left  ">
                              <div style="width:fit-content" class=" d-flex">
                                 <!-- Delay Dashboard -->
                                 <div _ngcontent-tke-c124="" class="order-header col-lg-12 py-2"><h3 _ngcontent-tke-c124="" class="mb-1" style="color: #1D4380; font-family: Work Sans; font-size: 27px!important; font-weight: 600;"> Trip Report</h3>
                                  <h5 _ngcontent-tke-c124="" style="color: #808080; font-family: Work Sans; font-size: 15px!important; font-weight: 500;">Home /  Trip Report</h5></div>
                                
                              </div>
                              </div>
                        </div>
                        <div class="col-lg-3"></div>
                        <div class="col-lg-3 " style="margin-top:13px" >
                          <div class="" style="display: inline-block;">

                            <!-- <img style="width:370px" src="assets/IRUN_CV_IMG/BlueDartBrandingLOGO.svg" class="header-brand-img desktop-logo"
                              alt="logo" id="change-image"> -->

                          </div>
                        </div>
                        <div class="col-lg-2 " style="margin-top:13px;    text-align: center;" >
                          <div  style="display: inline-block;">
                              <a class="header-brand1">
                                <img style="width:100px" src="assets/images/itraceit_logo1.png" class="header-brand-img desktop-logo"
                                  alt="logo" id="change-image">
    
                              </a>
                            </div>
                        </div>
                       
                      </div>
                  </div>


                </div>

              </div>

            </div>
          </div>
        </div>
        <!-- End HEADER -->
      </div>
    </div>
  </div>
</div>
<div class="container-flex" style=" padding: 6px;    border-bottom: 1px solid #80808042;">

  <div class="row">

    <!-- <div class="col-lg-12"> -->
    <div class="col-lg-1">
      <div class="row" style="display: inline-block;">
          <!-- <a data-bs-toggle="collapse" data-bs-target="#collapseExample" role="button" aria-expanded="false"
            aria-controls="collapseExample" style="font-size: 13px;font-weight: 500;">
            <i class="fa fa-filter" aria-hidden="true"
              style="font-size: 20px;color: gray ;margin-top: 8px;"></i>FILTER
          </a> -->
          <a data-bs-toggle="collapse" data-bs-target="#collapseExample" role="button" aria-expanded="true"
          aria-controls="collapseExample" style="font-size: 13px; font-weight: 500;">
          <i class="fa fa-filter" aria-hidden="true" style="font-size: 20px; color: gray; margin-top: 8px;"></i> FILTER
       </a>
        </div>
    </div>
  </div>
</div>
<div class="container-flex" style="    padding-top: 5px !important; padding: 17px;">

  <div class="row">

    <div class="col-lg-12">
      <!-- <div class="col-lg-12"> -->
          <div  id="collapseExample" class="collapse show">
        <form #triggerHistoryForm="ngForm" (ngSubmit)="triggerHstSubmit(triggerHistoryForm)">
          <!-- <form #triggerHistoryForm="ngForm" (ngSubmit)="triggerHstSubmit(triggerHistoryForm..value.ReportType)"> -->
              <div class="row">
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                      <label for="from_time" class="form-label">From Date</label>
                      <input type="text" data-date-format="YYYY-MM-DD" id="datepicker" (click)="start()"
                          class="form-control" [ngModel]="datetimepicker1" required name="from_time" />
                  </div>
          
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                      <label for="to_time" class="form-label">To Date</label>
                      <input type="text" step="1" class="form-control" data-date-format="YYYY-MM-DD" id="datepicker1" (click)="end()" [ngModel]="datetimepicker"
                          required name="to_time"  />
                  </div>
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                    <label for="District" class="form-label">Route Category</label>
                    <ng-select placeholder="Select" ngModel name="TripType" (change)="change_feeder($event)">
                        <ng-option value="" selected>Select</ng-option>
                        <ng-option *ngFor="let item of Master_filter?.RouteCategory | keyvalue" [value]="item.key">{{item.value}}</ng-option>
                        <!-- <ng-option *ngFor="let item of trigger_District | keyvalue" [value]="item">{{item.value}}</ng-option> -->
                    </ng-select>
                </div>
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                      <label for="Region" class="form-label">Route Type</label>
                      <ng-select placeholder="Select" ngModel  name="Feeder" 
                        #regionSelect="ngModel">
                          <ng-option value="" selected>Select</ng-option>
                          
                          <ng-option *ngFor="let item of feeder_type | keyvalue " [value]="item.key">
                            {{item.value}}
                          </ng-option>
                        </ng-select>
                  </div>
          
                
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                      <label for="Region" class="form-label">Trip Status</label>
                      <ng-select placeholder="Select" ngModel name="TripStatus">
                          <ng-option value="" selected>Select</ng-option>
                          <ng-option *ngFor="let item of   Master_filter?.TripStatus  | keyvalue" [value]="item.key">{{item.value}}</ng-option>
                      </ng-select>
                  </div>
                  <div class="col-lg-2 col-md-4 col-sm-6 "  id="qmMulticontainer" >
                      <label for="Region" class="form-label">Region</label>
                      <ng-select placeholder="Select" ngModel name="Region"   [multiple]="true"
                      [maxSelectedItems]="3"  (click)="validateRegion()"
                      (change)="onRegionChange($event)">
                          <!-- <ng-option value="" selected>Select</ng-option> -->
                          <ng-option *ngFor="let item of Master_filter?.Region | keyvalue" [value]="item.value">{{item.value}}</ng-option>
                      </ng-select>
                  </div>
                 
              </div>
             
              <div class="row">
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                      <label for="Origin" class="form-label">Origin</label>
                      <!-- <ng-select placeholder="Select" ngModel name="Origin">
                          <ng-option value="" selected>Select</ng-option>
                          <ng-option *ngFor="let item of Master_filter?.Customer | keyvalue" [value]="item.key">{{item.value}}</ng-option>
                      </ng-select> -->
                      <ng-select 
              placeholder="Select Origin" 
              [items]="filteredDestination" 
              bindLabel="value" 
              bindValue="key" 
              [typeahead]="searchTerm1" 
              (search)="onSearch_origin($event)"
              [(ngModel)]="selectedDestination1" 
              name="Origin">
            </ng-select>
                  </div>
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                      <label for="Destination" class="form-label">Destination</label>
                      <!-- <ng-select placeholder="Select" ngModel name="Destination" >
                          <ng-option value="" selected>Select</ng-option>
                          <ng-option *ngFor="let item of Master_filter?.Customer | keyvalue" [value]="item.key">{{item.value}}</ng-option>
                      </ng-select> -->
                      <ng-select 
              placeholder="Select Destination" 
              [items]="filteredDestination1" 
              bindLabel="value" 
              bindValue="key" 
              [(ngModel)]="selectedDestination" 
              [typeahead]="searchTerm" 
              (search)="onSearch_Destination($event)"
              name="Destination">
            </ng-select>

                  </div>
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                      <label for="Vehicle" class="form-label">Vehicle</label>
                      <!-- <input type="text" name="Vehicle" class="form-control" ngModel /> -->
                      <ng-select  (search)="onSearch($event)" ngModel name="vehicle_number">
                   <ng-option *ngFor="let m of dataList" [value]="m.Id">{{m.vehicle_number}}</ng-option>
                      </ng-select>
                  </div>
          
                  <div class="col-lg-2 col-md-4 col-sm-6 ">
                      <label for="Route" class="form-label">Route</label>
                      <ng-select placeholder="Select" ngModel name="Route">
                          <ng-option value="" selected>Select</ng-option>
                          <ng-option *ngFor="let item of Master_filter?.Route | keyvalue" [value]="item.key">{{item.value}}</ng-option>
                      </ng-select>
                  </div>
          

                  <!-- <div class="col-lg-2 col-md-4 col-sm-6 ">
                    <label for="Delay" class="form-label">Delay Type</label>
                    <ng-select placeholder="Select" ngModel name="Delay">
                        <ng-option value="" selected>Select</ng-option>
                        <ng-option *ngFor="let item of Master_filter?.ETADelay | keyvalue" [value]="item.key">{{item.value}}</ng-option>
                    </ng-select>
                </div> -->
 
                <!-- <div class="col-lg-2 col-md-4 col-sm-6 ">
                  <label for="Supervisor" class="form-label">Supervisor Exception</label>
                  <ng-select placeholder="Select" ngModel name="Supervisor">
                      <ng-option value="" selected>Select</ng-option>
                      <ng-option *ngFor="let item of Master_filter?.SupervisorException | keyvalue" [value]="item.key">{{item.value}}</ng-option>
                  </ng-select>
              </div> -->

              <div class="col-lg-2 col-md-4 col-sm-6 ">
                <label for="Report" class="form-label">Report Type</label>
                <ng-select placeholder="Select" ngModel name="ReportType" required 
                [(ngModel)]="selectedReportType"
                [ngClass]="{'input-error':submit && triggerHistoryForm.form.controls.ReportType.status=='INVALID'}">
                    <ng-option [value]="1" >Standard</ng-option>
                    <ng-option [value]="2" >Detailed</ng-option>
                    <ng-option [value]="3" >Detail Download CSV</ng-option>
                    <ng-option [value]="4" >Standard Download CSV</ng-option>
                    <!-- <ng-option *ngFor="let item of Master_filter.RouteCategory | keyvalue" [value]="item.key">{{item.value}}</ng-option> -->
                </ng-select>
            </div>


            <div class="col-lg-2 col-md-4 col-sm-6 ">
              <label for="triggervehicle" class="form-label"> Trip Id</label>
              <input type="text" class="form-control" ngModel name="TripId">
          </div>

          <!-- <div class="col-lg-2 col-md-4 col-sm-6 ">
            <label for="triggervehicle" class="form-label">Extra Information</label>
            <input type="checkbox" class="ms-5" ngModel name="ExtraInformation" (change)="extra_info($event)" [checked]="extra">
        </div> -->
        <div class="col-lg-2 col-md-4 col-sm-6 ">
          <label for="Region" class="form-label">GPS Vendor</label>
          <ng-select placeholder="Select" ngModel name="Vendor">
              <ng-option value="" selected>Select</ng-option>
              <ng-option *ngFor="let item of Master_filter?.Vendor | keyvalue" [value]="item.key">{{item.value}}</ng-option>
          </ng-select>
      </div>
                  <div class="col-lg-6 col-md-6 col-sm-6 ">
                      <button class="btn btn-outline-primary btn-sm w-100 " type="submit" style="width: 100px !important;margin-top: 37px;">Submit</button>
                  </div>
              </div>
          </form>

      </div>
    </div>
  </div>
</div>


<div class="info" style="    padding: 5px;" >
<!-- <div id="myGrid"></div> -->
<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" [fullScreen]="true" type="ball-spin-clockwise">
  <p style="color: black">Please Wait.. </p>
</ngx-spinner>
<ng-container *ngIf="search_grid">
<div class="d-flex align-items-center" style="margin-left: 84%;">
  
  <input class="cutombox p-2" type="text" id="filter-text-box" placeholder="Search..." (input)="onFilterTextBoxChanged()" class="form-control mb-2" />
  <!-- exportToExcel -->
      <button (click)="exportToExcel_datetime()" style="font-weight: bold"><i class="fa fa-file-excel-o" style="font-size: 18px;color: #1D6F42" title=" Download excel file"></i>
      </button>
      <button (click)="exportToPDF()"><i class="fa fa-file-pdf-o" style="font-size: 18px;color: #F40F02;" title=" Download PDF file"></i></button>
              <button (click)="exportToCSV()"><i class="fa fa-file-text-o" style="font-size: 18px;color: blue !important;" title=" Download CSV file"></i></button>
</div>
<div id="myGrid" style="height: 317px; width: 100%;" class="ag-theme-alpine grid_table"></div>
</ng-container>
</div>

<div class="modal fade" id="Datail" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" style=" max-width: 1500px;margin-left: 140px;">
    <div class="modal-content" style="height: 634px; width: 835px;">
      <div class="modal-header" style="height: 45px;">
          <label for="" style="margin-left: 480px;font-weight: 500;font-size: 16px;">Detail</label>
        <!-- <form #triggerHistoryForm="ngForm" (ngSubmit)="triggerHstSubmit(triggerHistoryForm.value)"> -->
        <!-- </form> -->
        <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <div class="modal-body">

       <hr>
        <div style="overflow-y: auto;">
          <ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" [fullScreen]="true" type="ball-spin-clockwise">
            
          </ngx-spinner>
          <div class="d-flex align-items-center" style="margin-left: 84%;">
  
            <input class="cutombox p-2" type="text" id="filter-text-box-pop" placeholder="Search..." (input)="onFilterTextBoxChanged_pop()" class="form-control mb-2" />
            
                <button (click)="onBtExport_pop()" style="font-weight: bold"><i class="fa fa-file-excel-o" style="font-size: 18px;color: #1D6F42" title=" Download Excel file"></i>
                </button>
                <button (click)="exportToPDF_popup()"><i class="fa fa-file-pdf-o" style="font-size: 18px;color: #F40F02;" title=" Download PDF file"></i></button>
                <!-- <button (click)="exportToPDF()"><i class="fa fa-file-pdf-o" style="font-size: 18px;color: #F40F02;"></i></button> -->
      
                <button (click)="exportToCSV_popup()"><i class="fa fa-file-text-o" style="font-size: 18px;color: blue !important;" title=" Download CSV file"></i></button>
               
          </div>
          <div id="myGrid-popup" style="height: 400px; width: 100%;" class="ag-theme-alpine grid_table"></div>
          
        </div>

      </div>
     

    </div>

  </div>
</div>

<div class="modal fade" id="v_track_Modal" tabindex="-1" aria-labelledby="mapModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="width:900px; max-width:1300px;position: relative;">
      <div class="modal-content" style="height: 700px;">
  
        <div class="modal-header">
          <!-- <h6 class="modal-title" id="exampleModalLabel">{{map_flag}}</h6> -->
          <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal" aria-label="Close"
            ></button>
            <!-- (click)="closeMap()" -->
        </div>
        <div class="modal-body">
          <!-- <ngx-spinner name="tracking" bdColor="rgba(51, 51, 51, 0.8)" size="default" [fullScreen]="false"
            type="ball-spin-clockwise">
            <p style="color: black">Please Wait.. </p>
          </ngx-spinner> -->
          <div id="map1">
  
  
          </div>
        </div>
       
    <div class="modal-drag-bottom py-1" style="background:white; cursor: move; height: 10px;"></div>
      </div>
    </div>
  </div>